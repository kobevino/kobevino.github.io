3:I[6731,[],""]
5:I[2923,[],""]
6:I[5403,["2","static/chunks/2-ad9c083589494568.js","332","static/chunks/332-a212bd7f004a89bf.js","34","static/chunks/34-00f8cbeb68282840.js","185","static/chunks/app/layout-37c356eeb03ff880.js"],"ColorSchemeScript"]
7:I[9420,["2","static/chunks/2-ad9c083589494568.js","332","static/chunks/332-a212bd7f004a89bf.js","34","static/chunks/34-00f8cbeb68282840.js","185","static/chunks/app/layout-37c356eeb03ff880.js"],"MantineProvider"]
8:I[7513,["2","static/chunks/2-ad9c083589494568.js","332","static/chunks/332-a212bd7f004a89bf.js","34","static/chunks/34-00f8cbeb68282840.js","185","static/chunks/app/layout-37c356eeb03ff880.js"],"Header"]
9:I[863,["2","static/chunks/2-ad9c083589494568.js","332","static/chunks/332-a212bd7f004a89bf.js","34","static/chunks/34-00f8cbeb68282840.js","185","static/chunks/app/layout-37c356eeb03ff880.js"],"Container"]
b:I[7792,["2","static/chunks/2-ad9c083589494568.js","42","static/chunks/app/%5Bslug%5D/page-cdea868390d0022c.js"],"Title"]
c:I[8002,["2","static/chunks/2-ad9c083589494568.js","42","static/chunks/app/%5Bslug%5D/page-cdea868390d0022c.js"],"Text"]
4:["slug","how-to-dockerize","d"]
a:T53f,M62.6 142c-2.133 0-3.2-1.067-3.2-3.2V118h-56c-2 0-3-1-3-3V92.8c0-1.333.4-2.733 1.2-4.2L58.2 4c.8-1.333 2.067-2 3.8-2h28c2 0 3 1 3 3v85.4h11.2c.933 0 1.733.333 2.4 1 .667.533 1 1.267 1 2.2v21.2c0 .933-.333 1.733-1 2.4-.667.533-1.467.8-2.4.8H93v20.8c0 2.133-1.067 3.2-3.2 3.2H62.6zM33 90.4h26.4V51.2L33 90.4zM181.67 144.6c-7.333 0-14.333-1.333-21-4-6.666-2.667-12.866-6.733-18.6-12.2-5.733-5.467-10.266-13-13.6-22.6-3.333-9.6-5-20.667-5-33.2 0-12.533 1.667-23.6 5-33.2 3.334-9.6 7.867-17.133 13.6-22.6 5.734-5.467 11.934-9.533 18.6-12.2 6.667-2.8 13.667-4.2 21-4.2 7.467 0 14.534 1.4 21.2 4.2 6.667 2.667 12.8 6.733 18.4 12.2 5.734 5.467 10.267 13 13.6 22.6 3.334 9.6 5 20.667 5 33.2 0 12.533-1.666 23.6-5 33.2-3.333 9.6-7.866 17.133-13.6 22.6-5.6 5.467-11.733 9.533-18.4 12.2-6.666 2.667-13.733 4-21.2 4zm0-31c9.067 0 15.6-3.733 19.6-11.2 4.134-7.6 6.2-17.533 6.2-29.8s-2.066-22.2-6.2-29.8c-4.133-7.6-10.666-11.4-19.6-11.4-8.933 0-15.466 3.8-19.6 11.4-4 7.6-6 17.533-6 29.8s2 22.2 6 29.8c4.134 7.467 10.667 11.2 19.6 11.2zM316.116 142c-2.134 0-3.2-1.067-3.2-3.2V118h-56c-2 0-3-1-3-3V92.8c0-1.333.4-2.733 1.2-4.2l56.6-84.6c.8-1.333 2.066-2 3.8-2h28c2 0 3 1 3 3v85.4h11.2c.933 0 1.733.333 2.4 1 .666.533 1 1.267 1 2.2v21.2c0 .933-.334 1.733-1 2.4-.667.533-1.467.8-2.4.8h-11.2v20.8c0 2.133-1.067 3.2-3.2 3.2h-27.2zm-29.6-51.6h26.4V51.2l-26.4 39.2z0:["TbAxYDFlKz3UDzKZ38nIi",[[["",{"children":[["slug","how-to-dockerize","d"],{"children":["__PAGE__?{\"slug\":\"how-to-dockerize\"}",{}]}]},"$undefined","$undefined",true],["",{"children":[["slug","how-to-dockerize","d"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"./_next/static/css/4c62bdaf9ccfa79d.css","precedence":"next","crossOrigin":"$undefined"}]]}],null]},[["$","html",null,{"lang":"en","children":[["$","head",null,{"children":["$","$L6",null,{"defaultColorScheme":"auto"}]}],["$","body",null,{"children":["$","$L7",null,{"theme":{"cursorType":"pointer"},"defaultColorScheme":"auto","children":[["$","$L8",null,{}],["$","$L9",null,{"children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","$L9",null,{"className":"not-found_root___8tHH","children":["$","div",null,{"className":"not-found_inner__jk2We","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 362 145","className":"not-found_image__klXiS","children":[["$","title",null,{"children":"404"}],["$","path",null,{"fill":"currentColor","d":"$a"}]]}],["$","div",null,{"className":"not-found_content__cklTM","children":[["$","$Lb",null,{"className":"not-found_title__bOfUG","children":"Nothing to see here"}],["$","$Lc",null,{"c":"dimmed","size":"lg","ta":"center","className":"not-found_description__7RPJl","children":"Page you are trying to open does not exist. You may have mistyped the address, or the page has been moved to another URL. If you think this is an error contact support."}]]}]]}]}],"notFoundStyles":[["$","link","0",{"rel":"stylesheet","href":"./_next/static/css/9b82fbf9d3dab81a.css","precedence":"next","crossOrigin":"$undefined"}]],"styles":null}]}]]}]}]]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"./_next/static/css/dbb50fd420b33798.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"./_next/static/css/456480efaa4d0c44.css","precedence":"next","crossOrigin":"$undefined"}]],[null,"$Ld"]]]]]
d:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Kobe's Blog"}],["$","meta","3",{"name":"description","content":"Generated by Jaesung Lee"}],["$","link","4",{"rel":"icon","href":"/favicon.ico"}]]
1:null
e:I[5287,["2","static/chunks/2-ad9c083589494568.js","42","static/chunks/app/%5Bslug%5D/page-cdea868390d0022c.js"],"Stack"]
f:I[9231,["2","static/chunks/2-ad9c083589494568.js","42","static/chunks/app/%5Bslug%5D/page-cdea868390d0022c.js"],"Group"]
11:I[3179,["2","static/chunks/2-ad9c083589494568.js","42","static/chunks/app/%5Bslug%5D/page-cdea868390d0022c.js"],"Comments"]
10:Ta04f,<p>I'll introduce how to dockerize app application. It's a little hard to learn the process, if you understand it, you will be first step toward DevOps engineer.</p>
<h2>Create Dockerfile</h2>
<p>First, create a next application before Dockerfile. After that, you have to create a Dockerfile in root folder.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="sh" data-theme="dracula"><code data-language="sh" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#6272A4"># Initialize next app</span></span>
<span data-line=""><span style="color:#50FA7B">$</span><span style="color:#F1FA8C"> npx</span><span style="color:#F1FA8C"> create-next-app@latest</span></span>
<span data-line=""><span style="color:#50FA7B">$</span><span style="color:#F1FA8C"> yarn</span><span style="color:#F1FA8C"> add</span><span style="color:#F1FA8C"> next-runtime-env</span></span>
<span data-line=""><span style="color:#50FA7B">$</span><span style="color:#F1FA8C"> touch</span><span style="color:#F1FA8C"> Dockerfile</span></span><button type="button" title="Copy code" aria-label="Copy code" data="# Initialize next app
$ npx create-next-app@latest
$ yarn add next-runtime-env
$ touch Dockerfile" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p>To optimize application, we will config <code>standalone</code> mode in outout.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="js" data-theme="dracula"><code data-language="js" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#6272A4">/** </span><span style="color:#FF79C6">@type</span><span style="color:#8BE9FD;font-style:italic"> {import('next').NextConfig}</span><span style="color:#6272A4"> */</span></span>
<span data-line=""><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> nextConfig </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> {</span></span>
<span data-line=""><span style="color:#F8F8F2">  output</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><mark data-highlighted-chars="" data-chars-id="green"><span style="color:#F1FA8C">standalone</span></mark><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">};</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">export</span><span style="color:#FF79C6"> default</span><span style="color:#F8F8F2"> nextConfig;</span></span><button type="button" title="Copy code" aria-label="Copy code" data="/** @type {import(&#x27;next&#x27;).NextConfig} */
const nextConfig = {
  output: &#x27;standalone&#x27;,
};

export default nextConfig;" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p>But there is an issue. Because the server can't find static files, we have to copy <em>.next/static</em> folder in <em>.next/standalone/.next/</em> in <code>standalone</code> mode. So we have to modify <code>build</code> script.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="json" data-theme="dracula"><code data-language="json" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#F8F8F2">{</span></span>
<span data-line=""><span style="color:#8BE9FE">  "</span><span style="color:#8BE9FD">scripts</span><span style="color:#8BE9FE">"</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> {</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#8BE9FE">    "</span><span style="color:#8BE9FD">build</span><span style="color:#8BE9FE">"</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">next build &#x26;&#x26; cp -r .next/static .next/standalone/.next/</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">  }</span></span>
<span data-line=""><span style="color:#F8F8F2">}</span></span><button type="button" title="Copy code" aria-label="Copy code" data="{
  &#x22;scripts&#x22;: {
    &#x22;build&#x22;: &#x22;next build &#x26;&#x26; cp -r .next/static .next/standalone/.next/&#x22;,
  }
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p>We will insert environment variables dynamicall into application at runtime. To do that, we have to install <code>next-runtime-env</code>.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="sh" data-theme="dracula"><code data-language="sh" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#50FA7B">$</span><span style="color:#F1FA8C"> yarn</span><span style="color:#F1FA8C"> add</span><span style="color:#F1FA8C"> next-runtime-env</span></span>
<span data-line=""><span style="color:#50FA7B">$</span><span style="color:#F1FA8C"> touch</span><span style="color:#F1FA8C"> .env.development</span></span><button type="button" title="Copy code" aria-label="Copy code" data="$ yarn add next-runtime-env
$ touch .env.development" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="tsx" data-theme="dracula"><code data-language="tsx" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#6272A4">// layout.tsx</span></span>
<span data-line=""><span style="color:#FF79C6">import</span><span style="color:#FF79C6"> type</span><span style="color:#F8F8F2"> { Metadata } </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">next</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">;</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> { PublicEnvScript } </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">next-runtime-env</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span data-line=""><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> { Inter } </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">next/font/google</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">import</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">./globals.css</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> inter </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> Inter</span><span style="color:#F8F8F2">({ subsets</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> [</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">latin</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">] });</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">export</span><span style="color:#FF79C6"> const</span><span style="color:#F8F8F2"> metadata</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> Metadata</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> {</span></span>
<span data-line=""><span style="color:#F8F8F2">  title</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">Create Next App</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">  description</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">Generated by create next app</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">};</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">export</span><span style="color:#FF79C6"> default</span><span style="color:#FF79C6"> function</span><span style="color:#50FA7B"> RootLayout</span><span style="color:#F8F8F2">({</span></span>
<span data-line=""><span style="color:#FFB86C;font-style:italic">  children</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">}</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> Readonly</span><span style="color:#F8F8F2">&#x3C;{</span></span>
<span data-line=""><span style="color:#F8F8F2">  children</span><span style="color:#FF79C6">:</span><span style="color:#FFB86C;font-style:italic"> React</span><span style="color:#F8F8F2">.</span><span style="color:#FFB86C;font-style:italic">ReactNode</span><span style="color:#F8F8F2">;</span></span>
<span data-line=""><span style="color:#F8F8F2">}>) {</span></span>
<span data-line=""><span style="color:#FF79C6">  return</span><span style="color:#F8F8F2"> (</span></span>
<span data-line=""><span style="color:#F8F8F2">    &#x3C;</span><span style="color:#FF79C6">html</span><span style="color:#50FA7B;font-style:italic"> lang</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">en</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">></span></span>
<span data-line=""><span style="color:#F8F8F2">      &#x3C;</span><span style="color:#FF79C6">head</span><span style="color:#F8F8F2">></span></span>
<span data-line="" data-highlighted-line=""><span style="color:#F8F8F2">        &#x3C;</span><span style="color:#8BE9FD;font-style:italic">PublicEnvScript</span><span style="color:#50FA7B;font-style:italic"> nonce</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{{ headerKey</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">x-nonce</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2"> }} /></span></span>
<span data-line=""><span style="color:#F8F8F2">      &#x3C;/</span><span style="color:#FF79C6">head</span><span style="color:#F8F8F2">></span></span>
<span data-line=""><span style="color:#F8F8F2">      &#x3C;</span><span style="color:#FF79C6">body</span><span style="color:#50FA7B;font-style:italic"> className</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{inter.className}></span></span>
<span data-line=""><span style="color:#F8F8F2">        {children}</span></span>
<span data-line=""><span style="color:#F8F8F2">      &#x3C;/</span><span style="color:#FF79C6">body</span><span style="color:#F8F8F2">></span></span>
<span data-line=""><span style="color:#F8F8F2">    &#x3C;/</span><span style="color:#FF79C6">html</span><span style="color:#F8F8F2">></span></span>
<span data-line=""><span style="color:#F8F8F2">  );</span></span>
<span data-line=""><span style="color:#F8F8F2">}</span></span><button type="button" title="Copy code" aria-label="Copy code" data="// layout.tsx
import type { Metadata } from &#x22;next&#x22;;
import { PublicEnvScript } from &#x27;next-runtime-env&#x27;;
import { Inter } from &#x22;next/font/google&#x22;;

import &#x22;./globals.css&#x22;;

const inter = Inter({ subsets: [&#x22;latin&#x22;] });

export const metadata: Metadata = {
  title: &#x22;Create Next App&#x22;,
  description: &#x22;Generated by create next app&#x22;,
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang=&#x22;en&#x22;>
      <head>
        <PublicEnvScript nonce={{ headerKey: &#x27;x-nonce&#x27; }} />
      </head>
      <body className={inter.className}>
        {children}
      </body>
    </html>
  );
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="tsx" data-theme="dracula"><code data-language="tsx" data-theme="dracula" style="display: grid;"><span data-line="" data-highlighted-line=""><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> { env } </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">next-runtime-env</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span data-line=""><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> styles </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">./page.module.css</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">export</span><span style="color:#FF79C6"> default</span><span style="color:#FF79C6"> function</span><span style="color:#50FA7B"> Home</span><span style="color:#F8F8F2">() {</span></span>
<span data-line=""><span style="color:#FF79C6">  return</span><span style="color:#F8F8F2"> (</span></span>
<span data-line=""><span style="color:#F8F8F2">    &#x3C;</span><span style="color:#FF79C6">main</span><span style="color:#50FA7B;font-style:italic"> className</span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2">{styles.main}></span></span>
<span data-line="" data-highlighted-line=""><span style="color:#F8F8F2">      Hello, {</span><span style="color:#50FA7B">env</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">HELLO</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">)}</span></span>
<span data-line=""><span style="color:#F8F8F2">    &#x3C;/</span><span style="color:#FF79C6">main</span><span style="color:#F8F8F2">></span></span>
<span data-line=""><span style="color:#F8F8F2">  );</span></span>
<span data-line=""><span style="color:#F8F8F2">}</span></span><button type="button" title="Copy code" aria-label="Copy code" data="import { env } from &#x27;next-runtime-env&#x27;;
import styles from &#x22;./page.module.css&#x22;;

export default function Home() {
  return (
    <main className={styles.main}>
      Hello, {env(&#x27;HELLO&#x27;)}
    </main>
  );
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p>Now, we will write Dockerfile to create a docker image. To optimize docker image, we will use <em>Multi-Stage</em> builds. It's helpful to reduce image isze.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="dockerfile" data-theme="dracula"><code data-language="dockerfile" data-theme="dracula" style="display: grid;"><span data-line="" data-highlighted-line=""><span style="color:#FF79C6">FROM</span><span style="color:#F8F8F2"> node:alpine </span><span style="color:#FF79C6">AS</span><span style="color:#F8F8F2"> base</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">WORKDIR</span><span style="color:#F8F8F2"> /app</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">COPY</span><span style="color:#F8F8F2"> package.json yarn.lock ./</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">RUN</span><span style="color:#F8F8F2"> yarn install --frozen-lockfile</span></span>
<span data-line=""> </span>
<span data-line="" data-highlighted-line=""><span style="color:#FF79C6">FROM</span><span style="color:#F8F8F2"> base </span><span style="color:#FF79C6">AS</span><span style="color:#F8F8F2"> builder</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">WORKDIR</span><span style="color:#F8F8F2"> /app</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">COPY</span><span style="color:#F8F8F2"> --from=base /app/node_modules ./node_modules</span></span>
<span data-line=""><span style="color:#FF79C6">COPY</span><span style="color:#F8F8F2"> . .</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">RUN</span><span style="color:#F8F8F2"> yarn build</span></span>
<span data-line=""> </span>
<span data-line="" data-highlighted-line=""><span style="color:#FF79C6">FROM</span><span style="color:#F8F8F2"> base </span><span style="color:#FF79C6">AS</span><span style="color:#F8F8F2"> runner</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">WORKDIR</span><span style="color:#F8F8F2"> /app</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">COPY</span><span style="color:#F8F8F2"> --from=builder /app/.next/standalone ./</span></span>
<span data-line=""> </span>
<span data-line=""><mark data-highlighted-chars="" data-chars-id="green"><span style="color:#FF79C6">ENV</span></mark><span style="color:#F8F8F2"> HELLO KOBE</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">EXPOSE</span><span style="color:#F8F8F2"> 3000</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">CMD</span><span style="color:#F8F8F2"> [  </span><span style="color:#F1FA8C">"sh"</span><span style="color:#F8F8F2">, </span><span style="color:#F1FA8C">"-c"</span><span style="color:#F8F8F2">, </span><span style="color:#F1FA8C">"node server.js"</span><span style="color:#F8F8F2"> ]</span></span><button type="button" title="Copy code" aria-label="Copy code" data="FROM node:alpine AS base

WORKDIR /app

COPY package.json yarn.lock ./

RUN yarn install --frozen-lockfile

FROM base AS builder

WORKDIR /app

COPY --from=base /app/node_modules ./node_modules
COPY . .

RUN yarn build

FROM base AS runner

WORKDIR /app

COPY --from=builder /app/.next/standalone ./

ENV HELLO KOBE

EXPOSE 3000

CMD [  &#x22;sh&#x22;, &#x22;-c&#x22;, &#x22;node server.js&#x22; ]" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p>Don't forget to assign key and value on <code>ENV</code></p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="sh" data-theme="dracula"><code data-language="sh" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#6272A4"># Create docker image</span></span>
<span data-line=""><span style="color:#50FA7B">$</span><span style="color:#F1FA8C"> docker</span><span style="color:#F1FA8C"> build</span><span style="color:#BD93F9"> -t</span><span style="color:#F1FA8C"> myweb</span><span style="color:#F1FA8C"> .</span></span>
<span data-line=""><span style="color:#6272A4"># Create a container from myweb image and remove the container after exit from the container.</span></span>
<span data-line=""><span style="color:#50FA7B">$</span><span style="color:#F1FA8C"> docker</span><span style="color:#F1FA8C"> run</span><span style="color:#BD93F9"> --rm</span><span style="color:#BD93F9"> -d</span><span style="color:#BD93F9"> -p</span><span style="color:#F1FA8C"> 3001:3000</span><span style="color:#F1FA8C"> myweb</span></span><button type="button" title="Copy code" aria-label="Copy code" data="# Create docker image
$ docker build -t myweb .
# Create a container from myweb image and remove the container after exit from the container.
$ docker run --rm -d -p 3001:3000 myweb" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p><img src="./how-to-dockerize/running-container.png" alt="running container"></p>
<p>Finally, It's completed to run container using Dockerfile. But if we use docker-compose.yml, follow the below.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="yml" data-theme="dracula"><code data-language="yml" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#6272A4"># docker-compose.yml</span></span>
<span data-line=""><span style="color:#8BE9FD">version</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">3</span><span style="color:#E9F284">'</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#8BE9FD">services</span><span style="color:#FF79C6">:</span></span>
<span data-line=""><span style="color:#8BE9FD">  web</span><span style="color:#FF79C6">:</span></span>
<span data-line=""><span style="color:#8BE9FD">    container_name</span><span style="color:#FF79C6">:</span><span style="color:#F1FA8C"> test-app</span></span>
<span data-line=""><span style="color:#8BE9FD">    build</span><span style="color:#FF79C6">:</span></span>
<span data-line=""><span style="color:#8BE9FD">      context</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> .</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#8BE9FD">      dockerfile</span><span style="color:#FF79C6">:</span><span style="color:#F1FA8C"> Dockerfile</span></span>
<span data-line=""><span style="color:#8BE9FD">    ports</span><span style="color:#FF79C6">:</span></span>
<span data-line=""><span style="color:#FF79C6">      -</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">3001:3000</span><span style="color:#E9F284">"</span></span>
<span data-line=""><span style="color:#8BE9FD">    environment</span><span style="color:#FF79C6">:</span></span>
<span data-line=""><span style="color:#FF79C6">      -</span><span style="color:#F1FA8C"> HELLO=KOBEVINO</span></span><button type="button" title="Copy code" aria-label="Copy code" data="# docker-compose.yml
version: &#x27;3&#x27;

services:
  web:
    container_name: test-app
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - &#x22;3001:3000&#x22;
    environment:
      - HELLO=KOBEVINO" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p>Even though an environment variable is allocated in Dockerfile, we can override the environment variable in docker-compose.yml.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="sh" data-theme="dracula"><code data-language="sh" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#6272A4"># create image and run container</span></span>
<span data-line=""><span style="color:#50FA7B">$</span><span style="color:#F1FA8C"> docker-compose</span><span style="color:#F1FA8C"> up</span><span style="color:#BD93F9"> -d</span></span>
<span data-line=""><span style="color:#6272A4"># remove container</span></span>
<span data-line=""><span style="color:#50FA7B">$</span><span style="color:#F1FA8C"> docker-compose</span><span style="color:#F1FA8C"> down</span></span><button type="button" title="Copy code" aria-label="Copy code" data="# create image and run container
$ docker-compose up -d
# remove container
$ docker-compose down" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p><img src="./how-to-dockerize/running-container-2.png" alt="running container"></p>
<h2>Wrap Up</h2>
<p>I had a fun weekend this weekend, with Docker. Time flies. It's night. I have to go to work tomorrow. But I think it's meaningful weekend.</p>2:[["$","$Le",null,{"children":[["$","$Lb",null,{"order":2,"fw":900,"size":"h1","children":"How To Dockerize"}],["$","$Lc",null,{"size":"sm","c":"dimmed","children":"Sun, Aug 25,  2024"}]]}],["$","$Lf",null,{"className":"markdown","children":["$","div",null,{"className":"markdown","dangerouslySetInnerHTML":{"__html":"$10"}}]}],["$","$L11",null,{}]]
