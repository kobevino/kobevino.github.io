<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="./_next/static/css/dbb50fd420b33798.css" data-precedence="next"/><link rel="stylesheet" href="./_next/static/css/1b43b2959fdf142d.css" data-precedence="next"/><link rel="stylesheet" href="./_next/static/css/4c62bdaf9ccfa79d.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="./_next/static/chunks/webpack-ebbce2ffb9d844b7.js"/><script src="./_next/static/chunks/94c12b52-02bab8f31903f9d8.js" async=""></script><script src="./_next/static/chunks/842-cb809d85f4d450a1.js" async=""></script><script src="./_next/static/chunks/main-app-82a45780c036d1fa.js" async=""></script><script src="./_next/static/chunks/2-ad9c083589494568.js" async=""></script><script src="./_next/static/chunks/979-9f1e3dabf5b88387.js" async=""></script><script src="./_next/static/chunks/34-00f8cbeb68282840.js" async=""></script><script src="./_next/static/chunks/app/layout-75c372431f7ce25f.js" async=""></script><script src="./_next/static/chunks/app/%5Bslug%5D/page-cdea868390d0022c.js" async=""></script><title>Kobe&#x27;s Blog</title><meta name="description" content="Generated by Jaesung Lee"/><link rel="icon" href="/favicon.ico"/><script data-mantine-script="true">try {
  var _colorScheme = window.localStorage.getItem("mantine-color-scheme-value");
  var colorScheme = _colorScheme === "light" || _colorScheme === "dark" || _colorScheme === "auto" ? _colorScheme : "auto";
  var computedColorScheme = colorScheme !== "auto" ? colorScheme : window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
  document.documentElement.setAttribute("data-mantine-color-scheme", computedColorScheme);
} catch (e) {}
</script><script src="./_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body><style data-mantine-styles="true">:root{--mantine-cursor-type: pointer;}</style><style data-mantine-styles="classes">@media (max-width: 35.99375em) {.mantine-visible-from-xs {display: none !important;}}@media (min-width: 36em) {.mantine-hidden-from-xs {display: none !important;}}@media (max-width: 47.99375em) {.mantine-visible-from-sm {display: none !important;}}@media (min-width: 48em) {.mantine-hidden-from-sm {display: none !important;}}@media (max-width: 61.99375em) {.mantine-visible-from-md {display: none !important;}}@media (min-width: 62em) {.mantine-hidden-from-md {display: none !important;}}@media (max-width: 74.99375em) {.mantine-visible-from-lg {display: none !important;}}@media (min-width: 75em) {.mantine-hidden-from-lg {display: none !important;}}@media (max-width: 87.99375em) {.mantine-visible-from-xl {display: none !important;}}@media (min-width: 88em) {.mantine-hidden-from-xl {display: none !important;}}</style><header class="header_header__Y50HU"><div style="--container-size:var(--container-size-md)" class="header_inner__a4TQD m_7485cace mantine-Container-root" data-size="md"><div style="--group-gap:calc(0.5rem * var(--mantine-scale));--group-align:center;--group-justify:flex-start;--group-wrap:wrap" class="header_logo__qUoMG m_4081bf90 mantine-Group-root"><div style="gap:var(--mantine-spacing-xs);align-items:center" class="m_8bffd616 mantine-Flex-root __m__-R6mnja"><img alt="logo" loading="lazy" width="30" height="30" decoding="async" data-nimg="1" style="color:transparent" src="/logo.png"/><p style="--text-fz:var(--mantine-font-size-sm);--text-lh:var(--mantine-line-height-sm);color:var(--mantine-color-gray-text);font-weight:700;text-transform:uppercase" class="mantine-focus-auto header_typing__A7z3E m_b6d8b162 mantine-Text-root" data-size="sm">kobevino</p></div></div><div style="--group-gap:calc(0.3125rem * var(--mantine-scale));--group-align:center;--group-justify:flex-start;--group-wrap:wrap" class="m_4081bf90 mantine-Group-root"><div style="--group-gap:calc(0.3125rem * var(--mantine-scale));--group-align:center;--group-justify:flex-start;--group-wrap:wrap;margin-top:calc(0.3125rem * var(--mantine-scale))" class="m_4081bf90 mantine-Group-root"><a class="mantine-focus-auto m_849cf0da m_b6d8b162 mantine-Text-root mantine-Anchor-root" data-underline="hover" href="https://x.com/_kobevino" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-brand-x "><path d="M4 4l11.733 16h4.267l-11.733 -16z"></path><path d="M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"></path></svg></a><a class="mantine-focus-auto m_849cf0da m_b6d8b162 mantine-Text-root mantine-Anchor-root" data-underline="hover" href="https://www.facebook.com/kobe8vino24" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-brand-meta "><path d="M12 10.174c1.766 -2.784 3.315 -4.174 4.648 -4.174c2 0 3.263 2.213 4 5.217c.704 2.869 .5 6.783 -2 6.783c-1.114 0 -2.648 -1.565 -4.148 -3.652a27.627 27.627 0 0 1 -2.5 -4.174z"></path><path d="M12 10.174c-1.766 -2.784 -3.315 -4.174 -4.648 -4.174c-2 0 -3.263 2.213 -4 5.217c-.704 2.869 -.5 6.783 2 6.783c1.114 0 2.648 -1.565 4.148 -3.652c1 -1.391 1.833 -2.783 2.5 -4.174z"></path></svg></a><a class="mantine-focus-auto m_849cf0da m_b6d8b162 mantine-Text-root mantine-Anchor-root" data-underline="hover" href="https://www.instagram.com/_kobevino/" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-brand-instagram "><path d="M4 4m0 4a4 4 0 0 1 4 -4h8a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4z"></path><path d="M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path><path d="M16.5 7.5l0 .01"></path></svg></a><a class="mantine-focus-auto m_849cf0da m_b6d8b162 mantine-Text-root mantine-Anchor-root" data-underline="hover" href="https://www.linkedin.com/in/kobevino/" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-brand-linkedin "><path d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"></path><path d="M8 11l0 5"></path><path d="M8 8l0 .01"></path><path d="M12 16l0 -5"></path><path d="M16 16v-3a2 2 0 0 0 -4 0"></path></svg></a><a class="mantine-focus-auto m_849cf0da m_b6d8b162 mantine-Text-root mantine-Anchor-root" data-underline="hover" href="https://github.com/kobevino" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-brand-github "><path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"></path></svg></a></div><div style="--switch-height:var(--switch-height-md);--switch-width:var(--switch-width-md);--switch-thumb-size:var(--switch-thumb-size-md);--switch-label-font-size:var(--switch-label-font-size-md);--switch-track-label-padding:var(--switch-track-label-padding-md);--switch-color:var(--mantine-color-dark-4);--label-fz:var(--mantine-font-size-md);--label-lh:var(--label-lh-md);margin-left:calc(0.625rem * var(--mantine-scale))" class="m_5f93f3bb mantine-Switch-root m_5f75b09e mantine-Switch-root" data-size="md" data-label-position="right"><label class="m_5f6e695e mantine-Switch-body" for="mantine-Raqnja"><input id="mantine-Raqnja" type="checkbox" role="switch" class="m_926b4011 mantine-Switch-input"/><div class="m_9307d992 mantine-Switch-track" data-label-position="right" aria-hidden="true"><span class="m_93039a1d mantine-Switch-thumb" data-reduce-motion="true"></span><span class="m_8277e082 mantine-Switch-trackLabel"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ffd43b" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-sun " style="width:calc(1rem * var(--mantine-scale));height:calc(1rem * var(--mantine-scale))"><path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"></path><path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path></svg></span></div><div class="m_d3ea56bb mantine-Switch-labelWrapper"></div></label></div></div></div></header><div style="margin-top:calc(6.25rem * var(--mantine-scale))" class="m_7485cace mantine-Container-root"><div style="--stack-gap:var(--mantine-spacing-md);--stack-align:stretch;--stack-justify:flex-start" class="m_6d731127 mantine-Stack-root"><h2 style="--title-fw:var(--mantine-h1-font-weight);--title-lh:var(--mantine-h1-line-height);--title-fz:var(--mantine-h1-font-size);font-weight:900" class="m_8a5d1357 mantine-Title-root" data-size="h1" data-order="2">Micro-Frontend-With-S3</h2><p style="--text-fz:var(--mantine-font-size-sm);--text-lh:var(--mantine-line-height-sm);color:var(--mantine-color-dimmed)" class="mantine-focus-auto m_b6d8b162 mantine-Text-root" data-size="sm">Sat, Nov 29,  2025</p></div><div style="--group-gap:var(--mantine-spacing-md);--group-align:center;--group-justify:flex-start;--group-wrap:wrap" class="markdown m_4081bf90 mantine-Group-root"><div class="markdown"><p>Since I moved to new company, I've been responsible for designing the architecture for a new project.</p>
<h2>Micro-Frontend Architecture</h2>
<p><em>The things the team manager asked me for</em></p>
<ol>
<li>The legacy project, which is built on a monolithic architecture, had tons of issues. The two major issues we faced were long build times and severe side effects.</li>
<li>Very limited communication with the infrastructure team.</li>
<li>Lack of diverse hands-on experience for junior developers</li>
</ol>
<p>So, I studied a lot about <code>Micro Frontend Architecture</code> at that time. As a result, below is the architecture I designed and implemented.</p>
<p><img src="./micro-frontend-with-s3/micro-frontend-architecture.png" alt="Micro Frontend Architecture"></p>
<ul>
<li><code>Module-Federation</code> : This is core to implement micro-frontend architecture. This enables each applications to share modules at runtime. I used <a href="https://github.com/originjs/vite-plugin-federation" rel="nofollow" target="_blank">@originjs/vite-plugin-federation</a> for module federation.</li>
</ul>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="ts" data-theme="dracula"><code data-language="ts" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#6272A4">// shell vite.config.ts</span></span>
<span data-line=""><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> federation </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">@originjs/vite-plugin-federation</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span data-line=""><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> react </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">@vitejs/plugin-react-swc</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span data-line=""><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> { defineConfig } </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">vite</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> CLOUDFRONT_DOMAIN </span><span style="color:#FF79C6">=</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">https://yourdomain.cloudfront.net</span><span style="color:#E9F284">'</span></span>
<span data-line=""> </span>
<span data-line="" data-highlighted-line=""><span style="color:#FF79C6">const</span><span style="color:#50FA7B"> getRemoteUrls</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> (</span><span style="color:#FFB86C;font-style:italic">mode</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> string</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> isProd </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> mode </span><span style="color:#FF79C6">===</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">production</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#F8F8F2">  </span></span>
<span data-line="" data-highlighted-line=""><span style="color:#FF79C6">  return</span><span style="color:#F8F8F2"> {</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#F8F8F2">    health</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> isProd </span></span>
<span data-line="" data-highlighted-line=""><span style="color:#FF79C6">      ?</span><span style="color:#F1FA8C"> `</span><span style="color:#FF79C6">${</span><span style="color:#F8F8F2">CLOUDFRONT_DOMAIN</span><span style="color:#FF79C6">}</span><span style="color:#F1FA8C">/health/assets/remoteEntry.js`</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#FF79C6">      :</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">http://localhost:3001/assets/remoteEntry.js</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#F8F8F2">    insurance</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> isProd</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#FF79C6">      ?</span><span style="color:#F1FA8C"> `</span><span style="color:#FF79C6">${</span><span style="color:#F8F8F2">CLOUDFRONT_DOMAIN</span><span style="color:#FF79C6">}</span><span style="color:#F1FA8C">/insurance/assets/remoteEntry.js`</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#FF79C6">      :</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">http://localhost:3002/assets/remoteEntry.js</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#F8F8F2">    mydata</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> isProd</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#FF79C6">      ?</span><span style="color:#F1FA8C"> `</span><span style="color:#FF79C6">${</span><span style="color:#F8F8F2">CLOUDFRONT_DOMAIN</span><span style="color:#FF79C6">}</span><span style="color:#F1FA8C">/mydata/assets/remoteEntry.js`</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#FF79C6">      :</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">http://localhost:3003/assets/remoteEntry.js</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#F8F8F2">  };</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#F8F8F2">};</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">export</span><span style="color:#FF79C6"> default</span><span style="color:#50FA7B"> defineConfig</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">async</span><span style="color:#F8F8F2"> ({ </span><span style="color:#FFB86C;font-style:italic">mode</span><span style="color:#F8F8F2"> }) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span data-line=""><span style="color:#FF79C6">  return</span><span style="color:#F8F8F2"> {</span></span>
<span data-line=""><span style="color:#F8F8F2">    plugins</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> [</span></span>
<span data-line=""><span style="color:#50FA7B">      react</span><span style="color:#F8F8F2">(),</span></span>
<span data-line=""><span style="color:#50FA7B">      federation</span><span style="color:#F8F8F2">({</span></span>
<span data-line=""><span style="color:#F8F8F2">        name</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">shell</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#F8F8F2">        remotes</span><span style="color:#FF79C6">:</span><span style="color:#50FA7B"> getRemoteUrls</span><span style="color:#F8F8F2">(mode),</span></span>
<span data-line=""><span style="color:#F8F8F2">        shared</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> [</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">react</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">react-dom</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">react-router-dom</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">],</span></span>
<span data-line=""><span style="color:#F8F8F2">      }),</span></span>
<span data-line=""><span style="color:#F8F8F2">    ],</span></span>
<span data-line=""><span style="color:#F8F8F2">    build</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> {</span></span>
<span data-line=""><span style="color:#F8F8F2">      modulePreload</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> true</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">      target</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">esnext</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">      minify</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> true</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">      cssCodeSplit</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> true</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">    },</span></span>
<span data-line=""><span style="color:#F8F8F2">    server</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> {</span></span>
<span data-line=""><span style="color:#F8F8F2">      port</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 3000</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">      strictPort</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> true</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">    },</span></span>
<span data-line=""><span style="color:#F8F8F2">    preview</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> {</span></span>
<span data-line=""><span style="color:#F8F8F2">      port</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 3000</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">      strictPort</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> true</span></span>
<span data-line=""><span style="color:#F8F8F2">    },</span></span>
<span data-line=""><span style="color:#F8F8F2">  }</span></span>
<span data-line=""><span style="color:#F8F8F2">})</span></span><button type="button" title="Copy code" aria-label="Copy code" data="// shell vite.config.ts
import federation from &#x27;@originjs/vite-plugin-federation&#x27;;
import react from &#x27;@vitejs/plugin-react-swc&#x27;;
import { defineConfig } from &#x27;vite&#x27;;

const CLOUDFRONT_DOMAIN = &#x27;https://yourdomain.cloudfront.net&#x27;

const getRemoteUrls = (mode: string) => {
  const isProd = mode === &#x27;production&#x27;;
  
  return {
    health: isProd 
      ? &#x60;${CLOUDFRONT_DOMAIN}/health/assets/remoteEntry.js&#x60;
      : &#x27;http://localhost:3001/assets/remoteEntry.js&#x27;,
    insurance: isProd
      ? &#x60;${CLOUDFRONT_DOMAIN}/insurance/assets/remoteEntry.js&#x60;
      : &#x27;http://localhost:3002/assets/remoteEntry.js&#x27;,
    mydata: isProd
      ? &#x60;${CLOUDFRONT_DOMAIN}/mydata/assets/remoteEntry.js&#x60;
      : &#x27;http://localhost:3003/assets/remoteEntry.js&#x27;,
  };
};

export default defineConfig(async ({ mode }) => {
  return {
    plugins: [
      react(),
      federation({
        name: &#x27;shell&#x27;,
        remotes: getRemoteUrls(mode),
        shared: [&#x27;react&#x27;, &#x27;react-dom&#x27;, &#x27;react-router-dom&#x27;],
      }),
    ],
    build: {
      modulePreload: true,
      target: &#x27;esnext&#x27;,
      minify: true,
      cssCodeSplit: true,
    },
    server: {
      port: 3000,
      strictPort: true,
    },
    preview: {
      port: 3000,
      strictPort: true
    },
  }
})" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="ts" data-theme="dracula"><code data-language="ts" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#6272A4">// micro-app vite.config.ts</span></span>
<span data-line=""><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> federation </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">@originjs/vite-plugin-federation</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span data-line=""><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> react </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">@vitejs/plugin-react-swc</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span data-line=""><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> { defineConfig } </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">vite</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">export</span><span style="color:#FF79C6"> default</span><span style="color:#50FA7B"> defineConfig</span><span style="color:#F8F8F2">({</span></span>
<span data-line=""><span style="color:#F8F8F2">  plugins</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> [</span></span>
<span data-line=""><span style="color:#50FA7B">    react</span><span style="color:#F8F8F2">(),</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#50FA7B">    federation</span><span style="color:#F8F8F2">({</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#F8F8F2">      name</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">health</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#F8F8F2">      filename</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">remoteEntry.js</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#F8F8F2">      exposes</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> {</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#E9F284">        '</span><span style="color:#F1FA8C">./App</span><span style="color:#E9F284">'</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">./src/App.tsx</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#F8F8F2">      },</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#F8F8F2">      shared</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> [</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">react</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">react-dom</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">react-router-dom</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">],</span></span>
<span data-line="" data-highlighted-line=""><span style="color:#F8F8F2">    }),</span></span>
<span data-line=""><span style="color:#F8F8F2">  ],</span></span>
<span data-line=""><span style="color:#F8F8F2">  build</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> {</span></span>
<span data-line=""><span style="color:#F8F8F2">    modulePreload</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> true</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">    target</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">esnext</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">    minify</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> true</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">    cssCodeSplit</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> true</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">  },</span></span>
<span data-line=""><span style="color:#F8F8F2">  server</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> {</span></span>
<span data-line=""><span style="color:#F8F8F2">    port</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 3001</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">    strictPort</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> true</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">  },</span></span>
<span data-line=""><span style="color:#F8F8F2">  preview</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> {</span></span>
<span data-line=""><span style="color:#F8F8F2">    port</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 3001</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">    strictPort</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> true</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">  },</span></span>
<span data-line=""><span style="color:#F8F8F2">});</span></span><button type="button" title="Copy code" aria-label="Copy code" data="// micro-app vite.config.ts
import federation from &#x27;@originjs/vite-plugin-federation&#x27;;
import react from &#x27;@vitejs/plugin-react-swc&#x27;;
import { defineConfig } from &#x27;vite&#x27;;

export default defineConfig({
  plugins: [
    react(),
    federation({
      name: &#x27;health&#x27;,
      filename: &#x27;remoteEntry.js&#x27;,
      exposes: {
        &#x27;./App&#x27;: &#x27;./src/App.tsx&#x27;,
      },
      shared: [&#x27;react&#x27;, &#x27;react-dom&#x27;, &#x27;react-router-dom&#x27;],
    }),
  ],
  build: {
    modulePreload: true,
    target: &#x27;esnext&#x27;,
    minify: true,
    cssCodeSplit: true,
  },
  server: {
    port: 3001,
    strictPort: true,
  },
  preview: {
    port: 3001,
    strictPort: true,
  },
});" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<ul>
<li><code>S3</code> : This is a static web server for react app that is not supported SSR.</li>
</ul>
<p><img src="./micro-frontend-with-s3/s3.png" alt="S3"></p>
<ul>
<li><code>S3(cache bucket)</code> : This is a bucket to cache dependencies.</li>
</ul>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="yml" data-theme="dracula"><code data-language="yml" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#6272A4"># buildspec.yml</span></span>
<span data-line=""><span style="color:#8BE9FD">cache</span><span style="color:#FF79C6">:</span></span>
<span data-line=""><span style="color:#8BE9FD">  paths</span><span style="color:#FF79C6">:</span></span>
<span data-line=""><span style="color:#FF79C6">    -</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">.pnpm-store/**/*</span><span style="color:#E9F284">'</span></span><button type="button" title="Copy code" aria-label="Copy code" data="# buildspec.yml
cache:
  paths:
    - &#x27;.pnpm-store/**/*&#x27;" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p><img src="./micro-frontend-with-s3/cache-dependency.png" alt="cache-dependency"></p>
<p><img src="./micro-frontend-with-s3/s3-cache-bucket.png" alt="s3-cache-bucket"></p>
<ul>
<li><code>Cloudfront</code> : This is for static resources cache.</li>
<li><code>ECS(remote cache server)</code> : This is a critical key for remote caching on turborepo project. [ducktors/turborepo-remote-cache](https://github.com/ducktors/
turborepo-remote-cache)</li>
</ul>
<ul>
<li><code>cache hit</code>: The artifact was found in the cache → no build needed ❌</li>
<li><code>cache miss</code> : The artifact was not found in the cache → build triggered ✅</li>
</ul>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="yml" data-theme="dracula"><code data-language="yml" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#6272A4"># buildspec.yml</span></span>
<span data-line=""><span style="color:#8BE9FD">pre_build</span><span style="color:#FF79C6">:</span></span>
<span data-line=""><span style="color:#8BE9FD">    commands</span><span style="color:#FF79C6">:</span></span>
<span data-line=""><span style="color:#FF79C6">      -</span><span style="color:#F1FA8C"> export TURBO_API=$TURBO_API</span></span>
<span data-line=""><span style="color:#FF79C6">      -</span><span style="color:#F1FA8C"> export TURBO_TEAM=$TURBO_TEAM</span></span>
<span data-line=""><span style="color:#FF79C6">      -</span><span style="color:#F1FA8C"> export TURBO_TOKEN=$TURBO_TOKEN</span></span>
<span data-line=""><span style="color:#FF79C6">      -</span><span style="color:#F1FA8C"> mkdir -p .turbo</span></span>
<span data-line=""><span style="color:#FF79C6">      -</span><span style="color:#FF79C6"> |</span></span>
<span data-line=""><span style="color:#F1FA8C">        echo "{</span></span>
<span data-line=""><span style="color:#F1FA8C">          \"apiurl\": \"$TURBO_API\",</span></span>
<span data-line=""><span style="color:#F1FA8C">          \"teamslug\": \"$TURBO_TEAM\",</span></span>
<span data-line=""><span style="color:#F1FA8C">          \"token\": \"$TURBO_TOKEN\"</span></span>
<span data-line=""><span style="color:#F1FA8C">        }" > .turbo/config.json</span></span>
<span data-line=""><span style="color:#FF79C6">      -</span><span style="color:#F1FA8C"> cat .turbo/config.json</span></span>
<span data-line=""><span style="color:#8BE9FD">cache</span><span style="color:#FF79C6">:</span></span>
<span data-line=""><span style="color:#8BE9FD">  paths</span><span style="color:#FF79C6">:</span></span>
<span data-line=""><span style="color:#FF79C6">    -</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">.turbo/**/*</span><span style="color:#E9F284">'</span></span><button type="button" title="Copy code" aria-label="Copy code" data="# buildspec.yml
pre_build:
    commands:
      - export TURBO_API=$TURBO_API
      - export TURBO_TEAM=$TURBO_TEAM
      - export TURBO_TOKEN=$TURBO_TOKEN
      - mkdir -p .turbo
      - |
        echo &#x22;{
          \&#x22;apiurl\&#x22;: \&#x22;$TURBO_API\&#x22;,
          \&#x22;teamslug\&#x22;: \&#x22;$TURBO_TEAM\&#x22;,
          \&#x22;token\&#x22;: \&#x22;$TURBO_TOKEN\&#x22;
        }&#x22; > .turbo/config.json
      - cat .turbo/config.json
cache:
  paths:
    - &#x27;.turbo/**/*&#x27;" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p><img src="./micro-frontend-with-s3/cache-hit.png" alt="cache-hit"></p>
<h3>Issues and Solution</h3>
<ol>
<li>Bundle size issue</li>
</ol>
<p><img src="./micro-frontend-with-s3/bundle-size-issue.png" alt="cache-hit"></p>
<p>If a build artifact exceeds 500 KB, it’s not an absolute rule, but it’s considered a threshold where performance warnings may occur.
Vite uses Rollup internally, and by default, the <code>chunkSizeWarningLimit</code> is set to 500 KB.</p>
<p>So here is my solution.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="ts" data-theme="dracula"><code data-language="ts" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#6272A4">// vite.config.ts</span></span>
<span data-line=""><span style="color:#FF79C6">import</span><span style="color:#F8F8F2"> { visualizer } </span><span style="color:#FF79C6">from</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">rollup-plugin-visualizer</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#FF79C6">export</span><span style="color:#FF79C6"> default</span><span style="color:#50FA7B"> defineConfig</span><span style="color:#F8F8F2">({</span></span>
<span data-line=""><span style="color:#F8F8F2">  plugins</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> [</span></span>
<span data-line=""><span style="color:#50FA7B">    visualizer</span><span style="color:#F8F8F2">({ open</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> true</span><span style="color:#F8F8F2"> })</span></span>
<span data-line=""><span style="color:#F8F8F2">  ],</span></span>
<span data-line=""><span style="color:#F8F8F2">  build</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> {</span></span>
<span data-line=""><span style="color:#F8F8F2">    modulePreload</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> true</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">    target</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">esnext</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">    minify</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> true</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">    cssCodeSplit</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> true</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">  },</span></span>
<span data-line=""><span style="color:#F8F8F2">});</span></span><button type="button" title="Copy code" aria-label="Copy code" data="// vite.config.ts
import { visualizer } from &#x22;rollup-plugin-visualizer&#x22;;

export default defineConfig({
  plugins: [
    visualizer({ open: true })
  ],
  build: {
    modulePreload: true,
    target: &#x27;esnext&#x27;,
    minify: true,
    cssCodeSplit: true,
  },
});" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="sh" data-theme="dracula"><code data-language="sh" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#50FA7B">$</span><span style="color:#F1FA8C"> pnpm</span><span style="color:#BD93F9"> --filter</span><span style="color:#F8F8F2"> [PROJECT_FOLDER_NAME] build:dev</span></span><button type="button" title="Copy code" aria-label="Copy code" data="$ pnpm --filter [PROJECT_FOLDER_NAME] build:dev" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p><img src="./micro-frontend-with-s3/rollup-plugin-visualizer.png" alt="rollup-plugin-visualizer"></p>
<p>The problematic file right now is <code>__federation_expose_AppApp-DeQt32zZ.js</code>, which bundles Datadog, Braze, Sentry, and other libraries together.</p>
<p>I tried to try performing <code>code splitting</code> using <code>manual chucnk</code>.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="ts" data-theme="dracula"><code data-language="ts" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#6272A4">// vite.config.ts</span></span>
<span data-line=""><span style="color:#F8F8F2">build: {</span></span>
<span data-line=""><span style="color:#F8F8F2">  modulePreload: </span><span style="color:#BD93F9">true</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">  target: </span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">esnext</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">  minify: </span><span style="color:#BD93F9">true</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">  cssCodeSplit: </span><span style="color:#BD93F9">true</span><span style="color:#F8F8F2">,</span></span>
<span data-line=""><span style="color:#F8F8F2">  rollupOptions: {</span></span>
<span data-line=""><span style="color:#F8F8F2">    output: {</span></span>
<span data-line=""><span style="color:#50FA7B">      manualChunks</span><span style="color:#F8F8F2">(id) {</span></span>
<span data-line=""><span style="color:#FF79C6">        if</span><span style="color:#F8F8F2"> (id.</span><span style="color:#50FA7B">includes</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">node_modules</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">)) {</span></span>
<span data-line=""><span style="color:#FF79C6">          if</span><span style="color:#F8F8F2"> (id.</span><span style="color:#50FA7B">includes</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">@sentry</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">)) </span><span style="color:#FF79C6">return</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">vendor-sentry</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span data-line=""><span style="color:#FF79C6">          if</span><span style="color:#F8F8F2"> (id.</span><span style="color:#50FA7B">includes</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">@datadog</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">)) </span><span style="color:#FF79C6">return</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">vendor-datadog</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span data-line=""><span style="color:#FF79C6">          if</span><span style="color:#F8F8F2"> (id.</span><span style="color:#50FA7B">includes</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">@braze</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">)) </span><span style="color:#FF79C6">return</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">vendor-braze</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span data-line=""><span style="color:#F8F8F2">        }</span></span>
<span data-line=""><span style="color:#F8F8F2">      }</span></span>
<span data-line=""><span style="color:#F8F8F2">    },</span></span>
<span data-line=""><span style="color:#F8F8F2">  }</span></span>
<span data-line=""><span style="color:#F8F8F2">},</span></span><button type="button" title="Copy code" aria-label="Copy code" data="// vite.config.ts
build: {
  modulePreload: true,
  target: &#x27;esnext&#x27;,
  minify: true,
  cssCodeSplit: true,
  rollupOptions: {
    output: {
      manualChunks(id) {
        if (id.includes(&#x27;node_modules&#x27;)) {
          if (id.includes(&#x27;@sentry&#x27;)) return &#x27;vendor-sentry&#x27;;
          if (id.includes(&#x27;@datadog&#x27;)) return &#x27;vendor-datadog&#x27;;
          if (id.includes(&#x27;@braze&#x27;)) return &#x27;vendor-braze&#x27;;
        }
      }
    },
  }
}," class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p><img src="./micro-frontend-with-s3/manual-chunk.png" alt="manual-chunk"></p>
<p><em><strong>827.55 kB → 348.93 kB</strong></em> BOOM!</p>
<ol start="2">
<li>Memory issue on Codebuild</li>
</ol>
<p><code>counsel:build:dev: Error: write EPIPE</code></p>
<p>The error above occurs due to insufficient memory during the build. This project is a monorepo managed with Turborepo and contains multiple domain applications, which can lead to high memory usage and cause this issue. We need to improve the compute performance.</p>
<p><img src="./micro-frontend-with-s3/codebuild-compute.png" alt="codebuild-compute"></p>
<h2>Wrap Up</h2>
<p>While designing the micro-frontend project, I gained a much deeper understanding of the concept of microservices. On top of that, I had the opportunity to handle everything from A to Z — including infrastructure — which significantly expanded the scope of my work. It turned out to be a really meaningful experience.</p></div></div><div></div></div><script src="./_next/static/chunks/webpack-ebbce2ffb9d844b7.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"./_next/static/css/dbb50fd420b33798.css\",\"style\"]\n2:HL[\"./_next/static/css/1b43b2959fdf142d.css\",\"style\"]\n3:HL[\"./_next/static/css/4c62bdaf9ccfa79d.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"4:I[9148,[],\"\"]\n7:I[6731,[],\"\"]\n9:I[2923,[],\"\"]\na:I[5403,[\"2\",\"static/chunks/2-ad9c083589494568.js\",\"979\",\"static/chunks/979-9f1e3dabf5b88387.js\",\"34\",\"static/chunks/34-00f8cbeb68282840.js\",\"185\",\"static/chunks/app/layout-75c372431f7ce25f.js\"],\"ColorSchemeScript\"]\nb:I[9420,[\"2\",\"static/chunks/2-ad9c083589494568.js\",\"979\",\"static/chunks/979-9f1e3dabf5b88387.js\",\"34\",\"static/chunks/34-00f8cbeb68282840.js\",\"185\",\"static/chunks/app/layout-75c372431f7ce25f.js\"],\"MantineProvider\"]\nc:I[7513,[\"2\",\"static/chunks/2-ad9c083589494568.js\",\"979\",\"static/chunks/979-9f1e3dabf5b88387.js\",\"34\",\"static/chunks/34-00f8cbeb68282840.js\",\"185\",\"static/chunks/app/layout-75c372431f7ce25f.js\"],\"Header\"]\nd:I[863,[\"2\",\"static/chunks/2-ad9c083589494568.js\",\"979\",\"static/chunks/979-9f1e3dabf5b88387.js\",\"34\",\"static/chunks/34-00f8cbeb68282840.js\",\"185\",\"static/chunks/app/layout-75c372431f7ce25f.js\"],\"Container\"]\nf:I[7792,[\"2\",\"static/chunks/2-ad9c083589494568.js\",\"42\",\"static/chunks/app/%5Bslug%5D/page-cdea868390d0022c.js\"],\"Title\"]\n10:I[8002,[\"2\",\"static/chunks/2-ad9c083589494568.js\",\"42\",\"static/chunks/app/%5Bslug%5D/page-cdea868390d0022c.js\"],\"Text\"]\n12:I[1304,[],\"\"]\n8:[\"slug\",\"micro-frontend-with-s3\",\"d\"]\ne:T53f,M62.6 142c-2.133 0-3.2-1.067-3.2-3.2V118h-56c-2 0-3-1-3-3V92.8c0-1.333.4-2.733 1.2-4.2L58.2 4c.8-1.333 2.067-2 3.8-2h28c2 0 3 1 3 3v85.4h11.2c.933 0 1.733.333 2.4 1 .667.533 1 1.267 1 2.2v21.2c0 .933-.333 1.733-1 2.4-.667.533-1.467.8-2.4.8H93v20.8c0 2.133-1.067 3.2-3.2 3.2H62.6zM33 90.4h26.4V51.2L33 90.4zM181.67 144.6c-7.333 0-14.333-1.333-21-4-6.666-2.667-12.866-6.733-18.6-12.2-5.733-5.467-10.266-13-13.6-22.6-3.333-9.6-5-20.667-5-33.2 0-12.533 1.667-23.6 5-33.2 3.334-9.6 7.867-17.133 13.6-22.6 5.734-5.467 11.934-9.533 18.6-12.2 6.667-2.8 13.667-4.2 21-4.2 7.467 0 14.534 1.4 21.2 4.2 6.667 2.667 12.8 6.733 18.4 12.2 5.734 5.467 10.267 13 13.6 22.6 3.334 9.6 5 20.667 5 33.2 0 12.533-1.666 23.6-5 33.2-3.333 9.6-7.866 17.133-13.6 22.6-5.6 5.467-11.733 9.533-18.4 12.2-6.666 2.667-13.733 4-21.2 4zm0-31c9.067 0 15.6-3.733 19.6-11.2 4.134-"])</script><script>self.__next_f.push([1,"7.6 6.2-17.533 6.2-29.8s-2.066-22.2-6.2-29.8c-4.133-7.6-10.666-11.4-19.6-11.4-8.933 0-15.466 3.8-19.6 11.4-4 7.6-6 17.533-6 29.8s2 22.2 6 29.8c4.134 7.467 10.667 11.2 19.6 11.2zM316.116 142c-2.134 0-3.2-1.067-3.2-3.2V118h-56c-2 0-3-1-3-3V92.8c0-1.333.4-2.733 1.2-4.2l56.6-84.6c.8-1.333 2.066-2 3.8-2h28c2 0 3 1 3 3v85.4h11.2c.933 0 1.733.333 2.4 1 .666.533 1 1.267 1 2.2v21.2c0 .933-.334 1.733-1 2.4-.667.533-1.467.8-2.4.8h-11.2v20.8c0 2.133-1.067 3.2-3.2 3.2h-27.2zm-29.6-51.6h26.4V51.2l-26.4 39.2z13:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"./_next/static/css/dbb50fd420b33798.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"./_next/static/css/1b43b2959fdf142d.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"8cWx1zt8WLhtEFIRkePKt\",\"assetPrefix\":\".\",\"initialCanonicalUrl\":\"/micro-frontend-with-s3\",\"initialTree\":[\"\",{\"children\":[[\"slug\",\"micro-frontend-with-s3\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"micro-frontend-with-s3\\\"}\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[[\"slug\",\"micro-frontend-with-s3\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L5\",\"$L6\"],null],null]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$8\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"./_next/static/css/4c62bdaf9ccfa79d.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[\"$\",\"$La\",null,{\"defaultColorScheme\":\"auto\"}]}],[\"$\",\"body\",null,{\"children\":[\"$\",\"$Lb\",null,{\"theme\":{\"cursorType\":\"pointer\"},\"defaultColorScheme\":\"auto\",\"children\":[[\"$\",\"$Lc\",null,{}],[\"$\",\"$Ld\",null,{\"mt\":100,\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"$Ld\",null,{\"className\":\"not-found_root___8tHH\",\"children\":[\"$\",\"div\",null,{\"className\":\"not-found_inner__jk2We\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 362 145\",\"className\":\"not-found_image__klXiS\",\"children\":[[\"$\",\"title\",null,{\"children\":\"404\"}],[\"$\",\"path\",null,{\"fill\":\"currentColor\",\"d\":\"$e\"}]]}],[\"$\",\"div\",null,{\"className\":\"not-found_content__cklTM\",\"children\":[[\"$\",\"$Lf\",null,{\"className\":\"not-found_title__bOfUG\",\"children\":\"Nothing to see here\"}],[\"$\",\"$L10\",null,{\"c\":\"dimmed\",\"size\":\"lg\",\"ta\":\"center\",\"className\":\"not-found_description__7RPJl\",\"children\":\"Page you are trying to open does not exist. You may have mistyped the address, or the page has been moved to another URL. If you think this is an error contact support.\"}]]}]]}]}],\"notFoundStyles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"./_next/static/css/9b82fbf9d3dab81a.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],\"styles\":null}]}]]}]}]]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$L11\"],\"globalErrorComponent\":\"$12\",\"missingSlots\":\"$W13\"}]]\n"])</script><script>self.__next_f.push([1,"11:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Kobe's Blog\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Generated by Jaesung Lee\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\"}]]\n5:null\n"])</script><script>self.__next_f.push([1,"14:I[5287,[\"2\",\"static/chunks/2-ad9c083589494568.js\",\"42\",\"static/chunks/app/%5Bslug%5D/page-cdea868390d0022c.js\"],\"Stack\"]\n15:I[9231,[\"2\",\"static/chunks/2-ad9c083589494568.js\",\"42\",\"static/chunks/app/%5Bslug%5D/page-cdea868390d0022c.js\"],\"Group\"]\n17:I[3179,[\"2\",\"static/chunks/2-ad9c083589494568.js\",\"42\",\"static/chunks/app/%5Bslug%5D/page-cdea868390d0022c.js\"],\"Comments\"]\n16:Tb2ad,"])</script><script>self.__next_f.push([1,"\u003cp\u003eSince I moved to new company, I've been responsible for designing the architecture for a new project.\u003c/p\u003e\n\u003ch2\u003eMicro-Frontend Architecture\u003c/h2\u003e\n\u003cp\u003e\u003cem\u003eThe things the team manager asked me for\u003c/em\u003e\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eThe legacy project, which is built on a monolithic architecture, had tons of issues. The two major issues we faced were long build times and severe side effects.\u003c/li\u003e\n\u003cli\u003eVery limited communication with the infrastructure team.\u003c/li\u003e\n\u003cli\u003eLack of diverse hands-on experience for junior developers\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eSo, I studied a lot about \u003ccode\u003eMicro Frontend Architecture\u003c/code\u003e at that time. As a result, below is the architecture I designed and implemented.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"./micro-frontend-with-s3/micro-frontend-architecture.png\" alt=\"Micro Frontend Architecture\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eModule-Federation\u003c/code\u003e : This is core to implement micro-frontend architecture. This enables each applications to share modules at runtime. I used \u003ca href=\"https://github.com/originjs/vite-plugin-federation\" rel=\"nofollow\" target=\"_blank\"\u003e@originjs/vite-plugin-federation\u003c/a\u003e for module federation.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282A36;color:#F8F8F2\" tabindex=\"0\" data-language=\"ts\" data-theme=\"dracula\"\u003e\u003ccode data-language=\"ts\" data-theme=\"dracula\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#6272A4\"\u003e// shell vite.config.ts\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e federation \u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e@originjs/vite-plugin-federation\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e react \u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e@vitejs/plugin-react-swc\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e { defineConfig } \u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003evite\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003econst\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e CLOUDFRONT_DOMAIN \u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003ehttps://yourdomain.cloudfront.net\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003econst\u003c/span\u003e\u003cspan style=\"color:#50FA7B\"\u003e getRemoteUrls\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#FFB86C;font-style:italic\"\u003emode\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#8BE9FD;font-style:italic\"\u003e string\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e  const\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e isProd \u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e mode \u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e===\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003eproduction\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    health\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e isProd \u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e      ?\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e `\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003eCLOUDFRONT_DOMAIN\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e/health/assets/remoteEntry.js`\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e      :\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003ehttp://localhost:3001/assets/remoteEntry.js\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    insurance\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e isProd\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e      ?\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e `\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003eCLOUDFRONT_DOMAIN\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e/insurance/assets/remoteEntry.js`\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e      :\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003ehttp://localhost:3002/assets/remoteEntry.js\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    mydata\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e isProd\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e      ?\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e `\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003eCLOUDFRONT_DOMAIN\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e/mydata/assets/remoteEntry.js`\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e      :\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003ehttp://localhost:3003/assets/remoteEntry.js\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  };\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e};\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003eexport\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e default\u003c/span\u003e\u003cspan style=\"color:#50FA7B\"\u003e defineConfig\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003easync\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e ({ \u003c/span\u003e\u003cspan style=\"color:#FFB86C;font-style:italic\"\u003emode\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e }) \u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e=\u003e\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    plugins\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e [\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#50FA7B\"\u003e      react\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e(),\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#50FA7B\"\u003e      federation\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e        name\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003eshell\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e        remotes\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#50FA7B\"\u003e getRemoteUrls\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e(mode),\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e        shared\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003ereact\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003ereact-dom\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003ereact-router-dom\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e],\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e      }),\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    ],\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    build\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e      modulePreload\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e true\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e      target\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003eesnext\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e      minify\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e true\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e      cssCodeSplit\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e true\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    server\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e      port\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e 3000\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e      strictPort\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e true\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    preview\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e      port\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e 3000\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e      strictPort\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e true\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e})\u003c/span\u003e\u003c/span\u003e\u003cbutton type=\"button\" title=\"Copy code\" aria-label=\"Copy code\" data=\"// shell vite.config.ts\nimport federation from \u0026#x27;@originjs/vite-plugin-federation\u0026#x27;;\nimport react from \u0026#x27;@vitejs/plugin-react-swc\u0026#x27;;\nimport { defineConfig } from \u0026#x27;vite\u0026#x27;;\n\nconst CLOUDFRONT_DOMAIN = \u0026#x27;https://yourdomain.cloudfront.net\u0026#x27;\n\nconst getRemoteUrls = (mode: string) =\u003e {\n  const isProd = mode === \u0026#x27;production\u0026#x27;;\n  \n  return {\n    health: isProd \n      ? \u0026#x60;${CLOUDFRONT_DOMAIN}/health/assets/remoteEntry.js\u0026#x60;\n      : \u0026#x27;http://localhost:3001/assets/remoteEntry.js\u0026#x27;,\n    insurance: isProd\n      ? \u0026#x60;${CLOUDFRONT_DOMAIN}/insurance/assets/remoteEntry.js\u0026#x60;\n      : \u0026#x27;http://localhost:3002/assets/remoteEntry.js\u0026#x27;,\n    mydata: isProd\n      ? \u0026#x60;${CLOUDFRONT_DOMAIN}/mydata/assets/remoteEntry.js\u0026#x60;\n      : \u0026#x27;http://localhost:3003/assets/remoteEntry.js\u0026#x27;,\n  };\n};\n\nexport default defineConfig(async ({ mode }) =\u003e {\n  return {\n    plugins: [\n      react(),\n      federation({\n        name: \u0026#x27;shell\u0026#x27;,\n        remotes: getRemoteUrls(mode),\n        shared: [\u0026#x27;react\u0026#x27;, \u0026#x27;react-dom\u0026#x27;, \u0026#x27;react-router-dom\u0026#x27;],\n      }),\n    ],\n    build: {\n      modulePreload: true,\n      target: \u0026#x27;esnext\u0026#x27;,\n      minify: true,\n      cssCodeSplit: true,\n    },\n    server: {\n      port: 3000,\n      strictPort: true,\n    },\n    preview: {\n      port: 3000,\n      strictPort: true\n    },\n  }\n})\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);window.setTimeout(() =\u003e this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;), 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282A36;color:#F8F8F2\" tabindex=\"0\" data-language=\"ts\" data-theme=\"dracula\"\u003e\u003ccode data-language=\"ts\" data-theme=\"dracula\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#6272A4\"\u003e// micro-app vite.config.ts\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e federation \u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e@originjs/vite-plugin-federation\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e react \u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e@vitejs/plugin-react-swc\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e { defineConfig } \u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003evite\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003eexport\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e default\u003c/span\u003e\u003cspan style=\"color:#50FA7B\"\u003e defineConfig\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  plugins\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e [\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#50FA7B\"\u003e    react\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e(),\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#50FA7B\"\u003e    federation\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e      name\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003ehealth\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e      filename\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003eremoteEntry.js\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e      exposes\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#E9F284\"\u003e        '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e./App\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e./src/App.tsx\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e      },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e      shared\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003ereact\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003ereact-dom\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003ereact-router-dom\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e],\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\" data-highlighted-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    }),\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  ],\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  build\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    modulePreload\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e true\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    target\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003eesnext\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    minify\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e true\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    cssCodeSplit\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e true\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  server\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    port\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e 3001\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    strictPort\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e true\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  preview\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    port\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e 3001\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    strictPort\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e true\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e});\u003c/span\u003e\u003c/span\u003e\u003cbutton type=\"button\" title=\"Copy code\" aria-label=\"Copy code\" data=\"// micro-app vite.config.ts\nimport federation from \u0026#x27;@originjs/vite-plugin-federation\u0026#x27;;\nimport react from \u0026#x27;@vitejs/plugin-react-swc\u0026#x27;;\nimport { defineConfig } from \u0026#x27;vite\u0026#x27;;\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    federation({\n      name: \u0026#x27;health\u0026#x27;,\n      filename: \u0026#x27;remoteEntry.js\u0026#x27;,\n      exposes: {\n        \u0026#x27;./App\u0026#x27;: \u0026#x27;./src/App.tsx\u0026#x27;,\n      },\n      shared: [\u0026#x27;react\u0026#x27;, \u0026#x27;react-dom\u0026#x27;, \u0026#x27;react-router-dom\u0026#x27;],\n    }),\n  ],\n  build: {\n    modulePreload: true,\n    target: \u0026#x27;esnext\u0026#x27;,\n    minify: true,\n    cssCodeSplit: true,\n  },\n  server: {\n    port: 3001,\n    strictPort: true,\n  },\n  preview: {\n    port: 3001,\n    strictPort: true,\n  },\n});\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);window.setTimeout(() =\u003e this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;), 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eS3\u003c/code\u003e : This is a static web server for react app that is not supported SSR.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"./micro-frontend-with-s3/s3.png\" alt=\"S3\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eS3(cache bucket)\u003c/code\u003e : This is a bucket to cache dependencies.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282A36;color:#F8F8F2\" tabindex=\"0\" data-language=\"yml\" data-theme=\"dracula\"\u003e\u003ccode data-language=\"yml\" data-theme=\"dracula\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#6272A4\"\u003e# buildspec.yml\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#8BE9FD\"\u003ecache\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#8BE9FD\"\u003e  paths\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e    -\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e.pnpm-store/**/*\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003c/span\u003e\u003cbutton type=\"button\" title=\"Copy code\" aria-label=\"Copy code\" data=\"# buildspec.yml\ncache:\n  paths:\n    - \u0026#x27;.pnpm-store/**/*\u0026#x27;\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);window.setTimeout(() =\u003e this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;), 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003e\u003cimg src=\"./micro-frontend-with-s3/cache-dependency.png\" alt=\"cache-dependency\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"./micro-frontend-with-s3/s3-cache-bucket.png\" alt=\"s3-cache-bucket\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eCloudfront\u003c/code\u003e : This is for static resources cache.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eECS(remote cache server)\u003c/code\u003e : This is a critical key for remote caching on turborepo project. [ducktors/turborepo-remote-cache](https://github.com/ducktors/\nturborepo-remote-cache)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ecache hit\u003c/code\u003e: The artifact was found in the cache → no build needed ❌\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecache miss\u003c/code\u003e : The artifact was not found in the cache → build triggered ✅\u003c/li\u003e\n\u003c/ul\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282A36;color:#F8F8F2\" tabindex=\"0\" data-language=\"yml\" data-theme=\"dracula\"\u003e\u003ccode data-language=\"yml\" data-theme=\"dracula\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#6272A4\"\u003e# buildspec.yml\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#8BE9FD\"\u003epre_build\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#8BE9FD\"\u003e    commands\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e      -\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e export TURBO_API=$TURBO_API\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e      -\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e export TURBO_TEAM=$TURBO_TEAM\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e      -\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e export TURBO_TOKEN=$TURBO_TOKEN\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e      -\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e mkdir -p .turbo\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e      -\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e |\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F1FA8C\"\u003e        echo \"{\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F1FA8C\"\u003e          \\\"apiurl\\\": \\\"$TURBO_API\\\",\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F1FA8C\"\u003e          \\\"teamslug\\\": \\\"$TURBO_TEAM\\\",\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F1FA8C\"\u003e          \\\"token\\\": \\\"$TURBO_TOKEN\\\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F1FA8C\"\u003e        }\" \u003e .turbo/config.json\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e      -\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e cat .turbo/config.json\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#8BE9FD\"\u003ecache\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#8BE9FD\"\u003e  paths\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e    -\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e.turbo/**/*\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003c/span\u003e\u003cbutton type=\"button\" title=\"Copy code\" aria-label=\"Copy code\" data=\"# buildspec.yml\npre_build:\n    commands:\n      - export TURBO_API=$TURBO_API\n      - export TURBO_TEAM=$TURBO_TEAM\n      - export TURBO_TOKEN=$TURBO_TOKEN\n      - mkdir -p .turbo\n      - |\n        echo \u0026#x22;{\n          \\\u0026#x22;apiurl\\\u0026#x22;: \\\u0026#x22;$TURBO_API\\\u0026#x22;,\n          \\\u0026#x22;teamslug\\\u0026#x22;: \\\u0026#x22;$TURBO_TEAM\\\u0026#x22;,\n          \\\u0026#x22;token\\\u0026#x22;: \\\u0026#x22;$TURBO_TOKEN\\\u0026#x22;\n        }\u0026#x22; \u003e .turbo/config.json\n      - cat .turbo/config.json\ncache:\n  paths:\n    - \u0026#x27;.turbo/**/*\u0026#x27;\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);window.setTimeout(() =\u003e this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;), 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003e\u003cimg src=\"./micro-frontend-with-s3/cache-hit.png\" alt=\"cache-hit\"\u003e\u003c/p\u003e\n\u003ch3\u003eIssues and Solution\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eBundle size issue\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cimg src=\"./micro-frontend-with-s3/bundle-size-issue.png\" alt=\"cache-hit\"\u003e\u003c/p\u003e\n\u003cp\u003eIf a build artifact exceeds 500 KB, it’s not an absolute rule, but it’s considered a threshold where performance warnings may occur.\nVite uses Rollup internally, and by default, the \u003ccode\u003echunkSizeWarningLimit\u003c/code\u003e is set to 500 KB.\u003c/p\u003e\n\u003cp\u003eSo here is my solution.\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282A36;color:#F8F8F2\" tabindex=\"0\" data-language=\"ts\" data-theme=\"dracula\"\u003e\u003ccode data-language=\"ts\" data-theme=\"dracula\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#6272A4\"\u003e// vite.config.ts\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e { visualizer } \u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003erollup-plugin-visualizer\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e \u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003eexport\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e default\u003c/span\u003e\u003cspan style=\"color:#50FA7B\"\u003e defineConfig\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  plugins\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e [\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#50FA7B\"\u003e    visualizer\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e({ open\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e true\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e })\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  ],\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  build\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    modulePreload\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e true\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    target\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003eesnext\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    minify\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e true\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    cssCodeSplit\u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e true\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e});\u003c/span\u003e\u003c/span\u003e\u003cbutton type=\"button\" title=\"Copy code\" aria-label=\"Copy code\" data=\"// vite.config.ts\nimport { visualizer } from \u0026#x22;rollup-plugin-visualizer\u0026#x22;;\n\nexport default defineConfig({\n  plugins: [\n    visualizer({ open: true })\n  ],\n  build: {\n    modulePreload: true,\n    target: \u0026#x27;esnext\u0026#x27;,\n    minify: true,\n    cssCodeSplit: true,\n  },\n});\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);window.setTimeout(() =\u003e this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;), 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282A36;color:#F8F8F2\" tabindex=\"0\" data-language=\"sh\" data-theme=\"dracula\"\u003e\u003ccode data-language=\"sh\" data-theme=\"dracula\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#50FA7B\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e pnpm\u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003e --filter\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e [PROJECT_FOLDER_NAME] build:dev\u003c/span\u003e\u003c/span\u003e\u003cbutton type=\"button\" title=\"Copy code\" aria-label=\"Copy code\" data=\"$ pnpm --filter [PROJECT_FOLDER_NAME] build:dev\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);window.setTimeout(() =\u003e this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;), 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003e\u003cimg src=\"./micro-frontend-with-s3/rollup-plugin-visualizer.png\" alt=\"rollup-plugin-visualizer\"\u003e\u003c/p\u003e\n\u003cp\u003eThe problematic file right now is \u003ccode\u003e__federation_expose_AppApp-DeQt32zZ.js\u003c/code\u003e, which bundles Datadog, Braze, Sentry, and other libraries together.\u003c/p\u003e\n\u003cp\u003eI tried to try performing \u003ccode\u003ecode splitting\u003c/code\u003e using \u003ccode\u003emanual chucnk\u003c/code\u003e.\u003c/p\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cpre style=\"background-color:#282A36;color:#F8F8F2\" tabindex=\"0\" data-language=\"ts\" data-theme=\"dracula\"\u003e\u003ccode data-language=\"ts\" data-theme=\"dracula\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#6272A4\"\u003e// vite.config.ts\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003ebuild: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  modulePreload: \u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  target: \u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003eesnext\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  minify: \u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  cssCodeSplit: \u003c/span\u003e\u003cspan style=\"color:#BD93F9\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  rollupOptions: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    output: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#50FA7B\"\u003e      manualChunks\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e(id) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e        if\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e (id.\u003c/span\u003e\u003cspan style=\"color:#50FA7B\"\u003eincludes\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003enode_modules\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e)) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e          if\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e (id.\u003c/span\u003e\u003cspan style=\"color:#50FA7B\"\u003eincludes\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e@sentry\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e)) \u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003evendor-sentry\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e          if\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e (id.\u003c/span\u003e\u003cspan style=\"color:#50FA7B\"\u003eincludes\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e@datadog\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e)) \u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003evendor-datadog\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#FF79C6\"\u003e          if\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e (id.\u003c/span\u003e\u003cspan style=\"color:#50FA7B\"\u003eincludes\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003e@braze\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e)) \u003c/span\u003e\u003cspan style=\"color:#FF79C6\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#F1FA8C\"\u003evendor-braze\u003c/span\u003e\u003cspan style=\"color:#E9F284\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#F8F8F2\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e    },\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F8F8F2\"\u003e},\u003c/span\u003e\u003c/span\u003e\u003cbutton type=\"button\" title=\"Copy code\" aria-label=\"Copy code\" data=\"// vite.config.ts\nbuild: {\n  modulePreload: true,\n  target: \u0026#x27;esnext\u0026#x27;,\n  minify: true,\n  cssCodeSplit: true,\n  rollupOptions: {\n    output: {\n      manualChunks(id) {\n        if (id.includes(\u0026#x27;node_modules\u0026#x27;)) {\n          if (id.includes(\u0026#x27;@sentry\u0026#x27;)) return \u0026#x27;vendor-sentry\u0026#x27;;\n          if (id.includes(\u0026#x27;@datadog\u0026#x27;)) return \u0026#x27;vendor-datadog\u0026#x27;;\n          if (id.includes(\u0026#x27;@braze\u0026#x27;)) return \u0026#x27;vendor-braze\u0026#x27;;\n        }\n      }\n    },\n  }\n},\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);window.setTimeout(() =\u003e this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;), 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003e\u003cimg src=\"./micro-frontend-with-s3/manual-chunk.png\" alt=\"manual-chunk\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003e\u003cstrong\u003e827.55 kB → 348.93 kB\u003c/strong\u003e\u003c/em\u003e BOOM!\u003c/p\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003eMemory issue on Codebuild\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003ccode\u003ecounsel:build:dev: Error: write EPIPE\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eThe error above occurs due to insufficient memory during the build. This project is a monorepo managed with Turborepo and contains multiple domain applications, which can lead to high memory usage and cause this issue. We need to improve the compute performance.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"./micro-frontend-with-s3/codebuild-compute.png\" alt=\"codebuild-compute\"\u003e\u003c/p\u003e\n\u003ch2\u003eWrap Up\u003c/h2\u003e\n\u003cp\u003eWhile designing the micro-frontend project, I gained a much deeper understanding of the concept of microservices. On top of that, I had the opportunity to handle everything from A to Z — including infrastructure — which significantly expanded the scope of my work. It turned out to be a really meaningful experience.\u003c/p\u003e"])</script><script>self.__next_f.push([1,"6:[[\"$\",\"$L14\",null,{\"children\":[[\"$\",\"$Lf\",null,{\"order\":2,\"fw\":900,\"size\":\"h1\",\"children\":\"Micro-Frontend-With-S3\"}],[\"$\",\"$L10\",null,{\"size\":\"sm\",\"c\":\"dimmed\",\"children\":\"Sat, Nov 29,  2025\"}]]}],[\"$\",\"$L15\",null,{\"className\":\"markdown\",\"children\":[\"$\",\"div\",null,{\"className\":\"markdown\",\"dangerouslySetInnerHTML\":{\"__html\":\"$16\"}}]}],[\"$\",\"$L17\",null,{}]]\n"])</script></body></html>