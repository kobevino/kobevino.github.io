3:I[6731,[],""]
5:I[2923,[],""]
6:I[5403,["2","static/chunks/2-ad9c083589494568.js","979","static/chunks/979-9f1e3dabf5b88387.js","34","static/chunks/34-00f8cbeb68282840.js","185","static/chunks/app/layout-75c372431f7ce25f.js"],"ColorSchemeScript"]
7:I[9420,["2","static/chunks/2-ad9c083589494568.js","979","static/chunks/979-9f1e3dabf5b88387.js","34","static/chunks/34-00f8cbeb68282840.js","185","static/chunks/app/layout-75c372431f7ce25f.js"],"MantineProvider"]
8:I[7513,["2","static/chunks/2-ad9c083589494568.js","979","static/chunks/979-9f1e3dabf5b88387.js","34","static/chunks/34-00f8cbeb68282840.js","185","static/chunks/app/layout-75c372431f7ce25f.js"],"Header"]
9:I[863,["2","static/chunks/2-ad9c083589494568.js","979","static/chunks/979-9f1e3dabf5b88387.js","34","static/chunks/34-00f8cbeb68282840.js","185","static/chunks/app/layout-75c372431f7ce25f.js"],"Container"]
b:I[7792,["2","static/chunks/2-ad9c083589494568.js","42","static/chunks/app/%5Bslug%5D/page-cdea868390d0022c.js"],"Title"]
c:I[8002,["2","static/chunks/2-ad9c083589494568.js","42","static/chunks/app/%5Bslug%5D/page-cdea868390d0022c.js"],"Text"]
4:["slug","kubernetes-cluster-setup-using-kubespray","d"]
a:T53f,M62.6 142c-2.133 0-3.2-1.067-3.2-3.2V118h-56c-2 0-3-1-3-3V92.8c0-1.333.4-2.733 1.2-4.2L58.2 4c.8-1.333 2.067-2 3.8-2h28c2 0 3 1 3 3v85.4h11.2c.933 0 1.733.333 2.4 1 .667.533 1 1.267 1 2.2v21.2c0 .933-.333 1.733-1 2.4-.667.533-1.467.8-2.4.8H93v20.8c0 2.133-1.067 3.2-3.2 3.2H62.6zM33 90.4h26.4V51.2L33 90.4zM181.67 144.6c-7.333 0-14.333-1.333-21-4-6.666-2.667-12.866-6.733-18.6-12.2-5.733-5.467-10.266-13-13.6-22.6-3.333-9.6-5-20.667-5-33.2 0-12.533 1.667-23.6 5-33.2 3.334-9.6 7.867-17.133 13.6-22.6 5.734-5.467 11.934-9.533 18.6-12.2 6.667-2.8 13.667-4.2 21-4.2 7.467 0 14.534 1.4 21.2 4.2 6.667 2.667 12.8 6.733 18.4 12.2 5.734 5.467 10.267 13 13.6 22.6 3.334 9.6 5 20.667 5 33.2 0 12.533-1.666 23.6-5 33.2-3.333 9.6-7.866 17.133-13.6 22.6-5.6 5.467-11.733 9.533-18.4 12.2-6.666 2.667-13.733 4-21.2 4zm0-31c9.067 0 15.6-3.733 19.6-11.2 4.134-7.6 6.2-17.533 6.2-29.8s-2.066-22.2-6.2-29.8c-4.133-7.6-10.666-11.4-19.6-11.4-8.933 0-15.466 3.8-19.6 11.4-4 7.6-6 17.533-6 29.8s2 22.2 6 29.8c4.134 7.467 10.667 11.2 19.6 11.2zM316.116 142c-2.134 0-3.2-1.067-3.2-3.2V118h-56c-2 0-3-1-3-3V92.8c0-1.333.4-2.733 1.2-4.2l56.6-84.6c.8-1.333 2.066-2 3.8-2h28c2 0 3 1 3 3v85.4h11.2c.933 0 1.733.333 2.4 1 .666.533 1 1.267 1 2.2v21.2c0 .933-.334 1.733-1 2.4-.667.533-1.467.8-2.4.8h-11.2v20.8c0 2.133-1.067 3.2-3.2 3.2h-27.2zm-29.6-51.6h26.4V51.2l-26.4 39.2z0:["Rl2bWh7SpXcU_k5oHxIGK",[[["",{"children":[["slug","kubernetes-cluster-setup-using-kubespray","d"],{"children":["__PAGE__?{\"slug\":\"kubernetes-cluster-setup-using-kubespray\"}",{}]}]},"$undefined","$undefined",true],["",{"children":[["slug","kubernetes-cluster-setup-using-kubespray","d"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"./_next/static/css/4c62bdaf9ccfa79d.css","precedence":"next","crossOrigin":"$undefined"}]]}],null]},[["$","html",null,{"lang":"en","children":[["$","head",null,{"children":["$","$L6",null,{"defaultColorScheme":"auto"}]}],["$","body",null,{"children":["$","$L7",null,{"theme":{"cursorType":"pointer"},"defaultColorScheme":"auto","children":[["$","$L8",null,{}],["$","$L9",null,{"mt":100,"children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","$L9",null,{"className":"not-found_root___8tHH","children":["$","div",null,{"className":"not-found_inner__jk2We","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 362 145","className":"not-found_image__klXiS","children":[["$","title",null,{"children":"404"}],["$","path",null,{"fill":"currentColor","d":"$a"}]]}],["$","div",null,{"className":"not-found_content__cklTM","children":[["$","$Lb",null,{"className":"not-found_title__bOfUG","children":"Nothing to see here"}],["$","$Lc",null,{"c":"dimmed","size":"lg","ta":"center","className":"not-found_description__7RPJl","children":"Page you are trying to open does not exist. You may have mistyped the address, or the page has been moved to another URL. If you think this is an error contact support."}]]}]]}]}],"notFoundStyles":[["$","link","0",{"rel":"stylesheet","href":"./_next/static/css/9b82fbf9d3dab81a.css","precedence":"next","crossOrigin":"$undefined"}]],"styles":null}]}]]}]}]]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"./_next/static/css/dbb50fd420b33798.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"./_next/static/css/1b43b2959fdf142d.css","precedence":"next","crossOrigin":"$undefined"}]],[null,"$Ld"]]]]]
d:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Kobe's Blog"}],["$","meta","3",{"name":"description","content":"Generated by Jaesung Lee"}],["$","link","4",{"rel":"icon","href":"/favicon.ico"}]]
1:null
e:I[5287,["2","static/chunks/2-ad9c083589494568.js","42","static/chunks/app/%5Bslug%5D/page-cdea868390d0022c.js"],"Stack"]
f:I[9231,["2","static/chunks/2-ad9c083589494568.js","42","static/chunks/app/%5Bslug%5D/page-cdea868390d0022c.js"],"Group"]
11:I[3179,["2","static/chunks/2-ad9c083589494568.js","42","static/chunks/app/%5Bslug%5D/page-cdea868390d0022c.js"],"Comments"]
10:Ta7d6,<p>If you're a frontend engineer, you should learn <strong>Kubernetes</strong>. As your applications grow, they need to be separated and deployed independently. Eventually, this leads to adopting a micro-frontend architecture, which fits perfectly with <strong>Kubernetes</strong>.</p>
<p>Iâ€™ve been trying to create a Kubernetes cluster using Vagrant and VirtualBox on my local machine for the past few days. However, it was quite difficult to run the cluster locally due to limited RAM.</p>
<p>So I've decided to create the cluster using EC2 instances, with <code>Kubespray</code> controller running locally.</p>
<p>First, let's create a master node and worker nodes.</p>
<h2>Create a Master node and Worker nodes.</h2>
<p><img src="./kubernetes-cluster-setup-using-kubespray/ec2-instance.png" alt="ec2-instance"></p>
<p>You should create the master node using an EC2 instance of <code>t3.medium</code> or higher. For the worker nodes, it's recommnded to use at least <code>t3.small</code> instances.</p>
<blockquote>
<p>Master Node - CPU: 2, RAM: 4 | Wokerer Node - CPU: 2, RAM: 2</p>
</blockquote>
<p><img src="./kubernetes-cluster-setup-using-kubespray/inbound-rule.png" alt="inbound-rule"></p>
<p>You need to open ports <code>6443</code> and <code>10250</code> in your EC2 security group.</p>
<ul>
<li><code>6443</code>is used by the Kubernetes API server on the master node.</li>
<li><code>10250</code> is used by Kubelet on each node, allowing the master to communicate with the workers.</li>
</ul>
<blockquote>
<p>These ports must be open so that the Kubespray playbook can successfully set up the cluster.</p>
</blockquote>
<h2>Create a KubeSpray controller on my computer.</h2>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="bash" data-theme="dracula"><code data-language="bash" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#50FA7B">$</span><span style="color:#F1FA8C"> mkdir</span><span style="color:#F1FA8C"> kubespray</span></span>
<span data-line=""><span style="color:#50FA7B">$</span><span style="color:#F1FA8C"> cd</span><span style="color:#F1FA8C"> kubespray</span></span>
<span data-line=""><span style="color:#50FA7B">$</span><span style="color:#F1FA8C"> git</span><span style="color:#F1FA8C"> clone</span><span style="color:#F1FA8C"> https://github.com/kubernetes-sigs/kubespray</span><span style="color:#F1FA8C"> .</span></span>
<span data-line=""><span style="color:#6272A4"># Ensure you have installed Docker then</span></span>
<span data-line=""><span style="color:#50FA7B">$</span><span style="color:#F1FA8C"> docker</span><span style="color:#F1FA8C"> run</span><span style="color:#BD93F9"> --rm</span><span style="color:#BD93F9"> -it</span><span style="color:#BD93F9"> --name</span><span style="color:#F1FA8C"> kubespray</span><span style="color:#BD93F9"> --mount</span><span style="color:#F1FA8C"> type=bind,source=</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">$(</span><span style="color:#8BE9FD">pwd</span><span style="color:#F1FA8C">)</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">/inventory/sample,dst=/inventory</span><span style="color:#FF79C6"> \</span></span>
<span data-line=""><span style="color:#BD93F9">  --mount</span><span style="color:#F1FA8C"> type=bind,source=</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">${</span><span style="color:#BD93F9">HOME</span><span style="color:#F1FA8C">}</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">/.ssh/id_rsa,dst=/root/.ssh/id_rsa</span><span style="color:#FF79C6"> \</span></span>
<span data-line=""><span style="color:#F1FA8C">  quay.io/kubespray/kubespray:v2.28.0</span><span style="color:#F1FA8C"> bash</span></span><button type="button" title="Copy code" aria-label="Copy code" data="$ mkdir kubespray
$ cd kubespray
$ git clone https://github.com/kubernetes-sigs/kubespray .
# Ensure you have installed Docker then
$ docker run --rm -it --name kubespray --mount type=bind,source=&#x22;$(pwd)&#x22;/inventory/sample,dst=/inventory \
  --mount type=bind,source=&#x22;${HOME}&#x22;/.ssh/id_rsa,dst=/root/.ssh/id_rsa \
  quay.io/kubespray/kubespray:v2.28.0 bash" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<blockquote>
<p>You should create an ssh key on your local machine before running the Kubespray conainer.</p>
</blockquote>
<h2>Run the Kubespray playbooks</h2>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="bash" data-theme="dracula"><code data-language="bash" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#6272A4"># Inside the container</span></span>
<span data-line=""><span style="color:#50FA7B">root@bbaa7247daad:/kubespray#</span><span style="color:#F1FA8C"> vi</span><span style="color:#F1FA8C"> /inventory/inventory.ini</span></span><button type="button" title="Copy code" aria-label="Copy code" data="# Inside the container
root@bbaa7247daad:/kubespray# vi /inventory/inventory.ini" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="ini" data-theme="dracula"><code data-language="ini" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#F8F8F2">master </span><span style="color:#FF79C6">ansible_host=</span><span style="color:#F8F8F2">&#x3C;Pulbic IP> </span><span style="color:#FF79C6">ip=</span><span style="color:#F8F8F2">&#x3C;Private IP> </span><span style="color:#FF79C6">etcd_member_name=</span><span style="color:#F8F8F2">etcd1 </span><span style="color:#FF79C6">ansible_user=</span><span style="color:#F8F8F2">ubuntu </span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#F8F8F2">[etcd:children]</span></span>
<span data-line=""><span style="color:#F8F8F2">kube_control_plane</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#F8F8F2">[kube_node]</span></span>
<span data-line=""><span style="color:#F8F8F2">worker1 </span><span style="color:#FF79C6">ansible_host=</span><span style="color:#F8F8F2">&#x3C;Pulbic IP> </span><span style="color:#FF79C6">ip=</span><span style="color:#F8F8F2">&#x3C;Private IP> </span><span style="color:#FF79C6">ansible_user=</span><span style="color:#F8F8F2">ubuntu </span></span>
<span data-line=""><span style="color:#F8F8F2">worker2 </span><span style="color:#FF79C6">ansible_host=</span><span style="color:#F8F8F2">&#x3C;Pulbic IP> </span><span style="color:#FF79C6">ip=</span><span style="color:#F8F8F2">&#x3C;Private IP> </span><span style="color:#FF79C6">ansible_user=</span><span style="color:#F8F8F2">ubuntu </span></span><button type="button" title="Copy code" aria-label="Copy code" data="master ansible_host=<Pulbic IP> ip=<Private IP> etcd_member_name=etcd1 ansible_user=ubuntu 

[etcd:children]
kube_control_plane

[kube_node]
worker1 ansible_host=<Pulbic IP> ip=<Private IP> ansible_user=ubuntu 
worker2 ansible_host=<Pulbic IP> ip=<Private IP> ansible_user=ubuntu " class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p>You should modify the <code>inventory.ini</code> file as shown above.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="bash" data-theme="dracula"><code data-language="bash" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#6272A4"># Copy the local public key</span></span>
<span data-line=""><span style="color:#50FA7B">$</span><span style="color:#F1FA8C"> cat</span><span style="color:#F1FA8C"> ~/.ssh/id_rsa.pub</span></span>
<span data-line=""><span style="color:#50FA7B">$</span><span style="color:#F1FA8C"> ssh</span><span style="color:#BD93F9"> -i</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">your-key-pair.pem</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C"> ubuntu@</span><span style="color:#FF79C6">&#x3C;</span><span style="color:#F1FA8C">master-public-i</span><span style="color:#F8F8F2">p</span><span style="color:#FF79C6">></span></span>
<span data-line=""><span style="color:#50FA7B">ubuntu@</span><span style="color:#F8F8F2">&#x3C;master-public-ip>:~$ </span><span style="color:#F1FA8C">echo</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">Paste your public key</span><span style="color:#E9F284">"</span><span style="color:#FF79C6"> >></span><span style="color:#F1FA8C"> ~/.ssh/authorized_keys</span></span><button type="button" title="Copy code" aria-label="Copy code" data="# Copy the local public key
$ cat ~/.ssh/id_rsa.pub
$ ssh -i &#x22;your-key-pair.pem&#x22; ubuntu@<master-public-ip>
ubuntu@<master-public-ip>:~$ echo &#x22;Paste your public key&#x22; >> ~/.ssh/authorized_keys" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p>You should add <strong>public key</strong> to each instance to authorize ssh access. Please do the same on the worker nodes.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="bash" data-theme="dracula"><code data-language="bash" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#6272A4"># Inside the container</span></span>
<span data-line=""><span style="color:#50FA7B">root@bbaa7247daad:/kubespray#</span><span style="color:#F1FA8C"> ansible-playbook</span><span style="color:#BD93F9"> -i</span><span style="color:#F1FA8C"> /inventory/inventory.ini</span><span style="color:#BD93F9"> --private-key</span><span style="color:#F1FA8C"> /root/.ssh/id_rsa</span><span style="color:#BD93F9"> --become</span><span style="color:#F1FA8C"> cluster.yml</span></span><button type="button" title="Copy code" aria-label="Copy code" data="# Inside the container
root@bbaa7247daad:/kubespray# ansible-playbook -i /inventory/inventory.ini --private-key /root/.ssh/id_rsa --become cluster.yml" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p><img src="./kubernetes-cluster-setup-using-kubespray/ansible-playbook.png" alt="ansible-playbook"></p>
<p>If the playbook finishes without any errors, as shown above, your Kubernetes cluster has been successfully set up.</p>
<h3>Check Master Node</h3>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="bash" data-theme="dracula"><code data-language="bash" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#50FA7B">$</span><span style="color:#F1FA8C"> ssh</span><span style="color:#BD93F9"> -i</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">your-key-pair.pem</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C"> ubuntu@</span><span style="color:#FF79C6">&#x3C;</span><span style="color:#F1FA8C">master-public-i</span><span style="color:#F8F8F2">p</span><span style="color:#FF79C6">></span></span>
<span data-line=""><span style="color:#50FA7B">ubuntu@</span><span style="color:#F8F8F2">&#x3C;master-public-ip>:~$ </span><span style="color:#F1FA8C">sudo</span><span style="color:#F1FA8C"> kubectl</span><span style="color:#F1FA8C"> version</span></span>
<span data-line=""><span style="color:#50FA7B">Client</span><span style="color:#F1FA8C"> Version:</span><span style="color:#F1FA8C"> v1.32.5</span></span>
<span data-line=""><span style="color:#50FA7B">Kustomize</span><span style="color:#F1FA8C"> Version:</span><span style="color:#F1FA8C"> v5.5.0</span></span>
<span data-line=""><span style="color:#50FA7B">Server</span><span style="color:#F1FA8C"> Version:</span><span style="color:#F1FA8C"> v1.32.5</span></span>
<span data-line=""><span style="color:#50FA7B">ubuntu@</span><span style="color:#F8F8F2">&#x3C;master-public-ip>:~$ </span><span style="color:#F1FA8C">sudo</span><span style="color:#F1FA8C"> kubectl</span><span style="color:#F1FA8C"> get</span><span style="color:#F1FA8C"> nodes</span></span>
<span data-line=""><span style="color:#50FA7B">NAME</span><span style="color:#F1FA8C">      STATUS</span><span style="color:#F1FA8C">   ROLES</span><span style="color:#F1FA8C">           AGE</span><span style="color:#F1FA8C">   VERSION</span></span>
<span data-line=""><span style="color:#50FA7B">master</span><span style="color:#F1FA8C">    Ready</span><span style="color:#F1FA8C">    control-plane</span><span style="color:#F1FA8C">   12m</span><span style="color:#F1FA8C">   v1.32.5</span></span>
<span data-line=""><span style="color:#50FA7B">worker1</span><span style="color:#F1FA8C">   Ready</span><span style="color:#FF79C6">    &#x3C;</span><span style="color:#F1FA8C">non</span><span style="color:#F8F8F2">e</span><span style="color:#FF79C6">></span><span style="color:#F1FA8C">          11m</span><span style="color:#F1FA8C">   v1.32.5</span></span>
<span data-line=""><span style="color:#50FA7B">worker2</span><span style="color:#F1FA8C">   Ready</span><span style="color:#FF79C6">    &#x3C;</span><span style="color:#F1FA8C">non</span><span style="color:#F8F8F2">e</span><span style="color:#FF79C6">></span><span style="color:#F1FA8C">          11m</span><span style="color:#F1FA8C">   v1.32.5</span></span><button type="button" title="Copy code" aria-label="Copy code" data="$ ssh -i &#x22;your-key-pair.pem&#x22; ubuntu@<master-public-ip>
ubuntu@<master-public-ip>:~$ sudo kubectl version
Client Version: v1.32.5
Kustomize Version: v5.5.0
Server Version: v1.32.5
ubuntu@<master-public-ip>:~$ sudo kubectl get nodes
NAME      STATUS   ROLES           AGE   VERSION
master    Ready    control-plane   12m   v1.32.5
worker1   Ready    <none>          11m   v1.32.5
worker2   Ready    <none>          11m   v1.32.5" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p>Boom! Success.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="bash" data-theme="dracula"><code data-language="bash" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#50FA7B">ubuntu@</span><span style="color:#F8F8F2">&#x3C;master-public-ip>:~$ </span><span style="color:#F1FA8C">mkdir</span><span style="color:#BD93F9"> -p</span><span style="color:#BD93F9"> $HOME</span><span style="color:#F1FA8C">/.kube</span></span>
<span data-line=""><span style="color:#50FA7B">ubuntu@</span><span style="color:#F8F8F2">&#x3C;master-public-ip>:~$ </span><span style="color:#F1FA8C">sudo</span><span style="color:#F1FA8C"> cp</span><span style="color:#BD93F9"> -i</span><span style="color:#F1FA8C"> /etc/kubernetes/admin.conf</span><span style="color:#BD93F9"> $HOME</span><span style="color:#F1FA8C">/.kube/config</span></span>
<span data-line=""><span style="color:#50FA7B">ubuntu@</span><span style="color:#F8F8F2">&#x3C;master-public-ip>:~$ </span><span style="color:#F1FA8C">sudo</span><span style="color:#F1FA8C"> chown</span><span style="color:#F8F8F2"> $(</span><span style="color:#50FA7B">id</span><span style="color:#BD93F9"> -u</span><span style="color:#F8F8F2">)</span><span style="color:#F1FA8C">:</span><span style="color:#F8F8F2">$(</span><span style="color:#50FA7B">id</span><span style="color:#BD93F9"> -g</span><span style="color:#F8F8F2">) </span><span style="color:#BD93F9">$HOME</span><span style="color:#F1FA8C">/.kube/config</span></span><button type="button" title="Copy code" aria-label="Copy code" data="ubuntu@<master-public-ip>:~$ mkdir -p $HOME/.kube
ubuntu@<master-public-ip>:~$ sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
ubuntu@<master-public-ip>:~$ sudo chown $(id -u):$(id -g) $HOME/.kube/config" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<p>If you want to use <code>kubectl</code> without <strong>sudo</strong>, follow the steps above.</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="bash" data-theme="dracula"><code data-language="bash" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#50FA7B">ubuntu@</span><span style="color:#F8F8F2">&#x3C;master-public-ip>:~$ </span><span style="color:#F1FA8C">kubectl</span><span style="color:#F1FA8C"> get</span><span style="color:#F1FA8C"> pod</span><span style="color:#BD93F9"> -n</span><span style="color:#F1FA8C"> kube-system</span></span>
<span data-line=""><span style="color:#50FA7B">NAME</span><span style="color:#F1FA8C">                                       READY</span><span style="color:#F1FA8C">   STATUS</span><span style="color:#F1FA8C">    RESTARTS</span><span style="color:#F1FA8C">   AGE</span></span>
<span data-line=""><span style="color:#50FA7B">calico-kube-controllers-588d6df6c9-g5wx8</span><span style="color:#F1FA8C">   1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   0</span><span style="color:#F1FA8C">          13m</span></span>
<span data-line=""><span style="color:#50FA7B">calico-node-2vrhd</span><span style="color:#F1FA8C">                          1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   0</span><span style="color:#F1FA8C">          14m</span></span>
<span data-line=""><span style="color:#50FA7B">calico-node-l5bsl</span><span style="color:#F1FA8C">                          1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   0</span><span style="color:#F1FA8C">          14m</span></span>
<span data-line=""><span style="color:#50FA7B">calico-node-pw95t</span><span style="color:#F1FA8C">                          1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   0</span><span style="color:#F1FA8C">          14m</span></span>
<span data-line=""><span style="color:#50FA7B">coredns-5c54f84c97-8dr66</span><span style="color:#F1FA8C">                   1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   0</span><span style="color:#F1FA8C">          13m</span></span>
<span data-line=""><span style="color:#50FA7B">coredns-5c54f84c97-spr5f</span><span style="color:#F1FA8C">                   1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   0</span><span style="color:#F1FA8C">          13m</span></span>
<span data-line=""><span style="color:#50FA7B">dns-autoscaler-56cb45595c-prs5h</span><span style="color:#F1FA8C">            1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   0</span><span style="color:#F1FA8C">          13m</span></span>
<span data-line=""><span style="color:#50FA7B">kube-apiserver-master</span><span style="color:#F1FA8C">                      1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   0</span><span style="color:#F1FA8C">          15m</span></span>
<span data-line=""><span style="color:#50FA7B">kube-controller-manager-master</span><span style="color:#F1FA8C">             1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   1</span><span style="color:#F1FA8C">          15m</span></span>
<span data-line=""><span style="color:#50FA7B">kube-proxy-2cpzg</span><span style="color:#F1FA8C">                           1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   0</span><span style="color:#F1FA8C">          14m</span></span>
<span data-line=""><span style="color:#50FA7B">kube-proxy-bzpqx</span><span style="color:#F1FA8C">                           1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   0</span><span style="color:#F1FA8C">          14m</span></span>
<span data-line=""><span style="color:#50FA7B">kube-proxy-h5zl7</span><span style="color:#F1FA8C">                           1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   0</span><span style="color:#F1FA8C">          14m</span></span>
<span data-line=""><span style="color:#50FA7B">kube-scheduler-master</span><span style="color:#F1FA8C">                      1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   1</span><span style="color:#F1FA8C">          15m</span></span>
<span data-line=""><span style="color:#50FA7B">nginx-proxy-worker1</span><span style="color:#F1FA8C">                        1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   0</span><span style="color:#F1FA8C">          14m</span></span>
<span data-line=""><span style="color:#50FA7B">nginx-proxy-worker2</span><span style="color:#F1FA8C">                        1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   0</span><span style="color:#F1FA8C">          14m</span></span>
<span data-line=""><span style="color:#50FA7B">nodelocaldns-g8kqw</span><span style="color:#F1FA8C">                         1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   0</span><span style="color:#F1FA8C">          13m</span></span>
<span data-line=""><span style="color:#50FA7B">nodelocaldns-gwlfx</span><span style="color:#F1FA8C">                         1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   0</span><span style="color:#F1FA8C">          13m</span></span>
<span data-line=""><span style="color:#50FA7B">nodelocaldns-j4jdm</span><span style="color:#F1FA8C">                         1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   0</span><span style="color:#F1FA8C">          13m</span></span><button type="button" title="Copy code" aria-label="Copy code" data="ubuntu@<master-public-ip>:~$ kubectl get pod -n kube-system
NAME                                       READY   STATUS    RESTARTS   AGE
calico-kube-controllers-588d6df6c9-g5wx8   1/1     Running   0          13m
calico-node-2vrhd                          1/1     Running   0          14m
calico-node-l5bsl                          1/1     Running   0          14m
calico-node-pw95t                          1/1     Running   0          14m
coredns-5c54f84c97-8dr66                   1/1     Running   0          13m
coredns-5c54f84c97-spr5f                   1/1     Running   0          13m
dns-autoscaler-56cb45595c-prs5h            1/1     Running   0          13m
kube-apiserver-master                      1/1     Running   0          15m
kube-controller-manager-master             1/1     Running   1          15m
kube-proxy-2cpzg                           1/1     Running   0          14m
kube-proxy-bzpqx                           1/1     Running   0          14m
kube-proxy-h5zl7                           1/1     Running   0          14m
kube-scheduler-master                      1/1     Running   1          15m
nginx-proxy-worker1                        1/1     Running   0          14m
nginx-proxy-worker2                        1/1     Running   0          14m
nodelocaldns-g8kqw                         1/1     Running   0          13m
nodelocaldns-gwlfx                         1/1     Running   0          13m
nodelocaldns-j4jdm                         1/1     Running   0          13m" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#282A36;color:#F8F8F2" tabindex="0" data-language="bash" data-theme="dracula"><code data-language="bash" data-theme="dracula" style="display: grid;"><span data-line=""><span style="color:#50FA7B">ubuntu@</span><span style="color:#F8F8F2">&#x3C;master-public-ip>:~$ </span><span style="color:#F1FA8C">kubectl</span><span style="color:#F1FA8C"> run</span><span style="color:#F1FA8C"> apache</span><span style="color:#BD93F9"> --image</span><span style="color:#F1FA8C"> httpd</span></span>
<span data-line=""><span style="color:#50FA7B">ubuntu@</span><span style="color:#F8F8F2">&#x3C;master-public-ip>:~$ </span><span style="color:#F1FA8C">kubectl</span><span style="color:#F1FA8C"> run</span><span style="color:#F1FA8C"> nginx</span><span style="color:#BD93F9"> --image</span><span style="color:#F1FA8C"> nginx</span></span>
<span data-line=""><span style="color:#50FA7B">ubuntu@</span><span style="color:#F8F8F2">&#x3C;master-public-ip>:~$ </span><span style="color:#F1FA8C">kubectl</span><span style="color:#F1FA8C"> get</span><span style="color:#F1FA8C"> po</span><span style="color:#BD93F9"> -o</span><span style="color:#F1FA8C"> wide</span></span>
<span data-line=""><span style="color:#50FA7B">NAME</span><span style="color:#F1FA8C">     READY</span><span style="color:#F1FA8C">   STATUS</span><span style="color:#F1FA8C">    RESTARTS</span><span style="color:#F1FA8C">   AGE</span><span style="color:#F1FA8C">    IP</span><span style="color:#F1FA8C">               NODE</span><span style="color:#F1FA8C">      NOMINATED</span><span style="color:#F1FA8C"> NODE</span><span style="color:#F1FA8C">   READINESS</span><span style="color:#F1FA8C"> GATES</span></span>
<span data-line=""><span style="color:#50FA7B">apache</span><span style="color:#F1FA8C">   1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   0</span><span style="color:#F1FA8C">          111s</span><span style="color:#BD93F9">   10.233.125.2</span><span style="color:#F1FA8C">     worker2</span><span style="color:#FF79C6">   &#x3C;</span><span style="color:#F1FA8C">non</span><span style="color:#F8F8F2">e</span><span style="color:#FF79C6">></span><span style="color:#FF79C6">           &#x3C;</span><span style="color:#F1FA8C">non</span><span style="color:#F8F8F2">e</span><span style="color:#FF79C6">></span></span>
<span data-line=""><span style="color:#50FA7B">nginx</span><span style="color:#F1FA8C">    1/1</span><span style="color:#F1FA8C">     Running</span><span style="color:#BD93F9">   0</span><span style="color:#F1FA8C">          103s</span><span style="color:#BD93F9">   10.233.105.131</span><span style="color:#F1FA8C">   worker1</span><span style="color:#FF79C6">   &#x3C;</span><span style="color:#F1FA8C">non</span><span style="color:#F8F8F2">e</span><span style="color:#FF79C6">></span><span style="color:#FF79C6">           &#x3C;</span><span style="color:#F1FA8C">non</span><span style="color:#F8F8F2">e</span><span style="color:#FF79C6">></span></span><button type="button" title="Copy code" aria-label="Copy code" data="ubuntu@<master-public-ip>:~$ kubectl run apache --image httpd
ubuntu@<master-public-ip>:~$ kubectl run nginx --image nginx
ubuntu@<master-public-ip>:~$ kubectl get po -o wide
NAME     READY   STATUS    RESTARTS   AGE    IP               NODE      NOMINATED NODE   READINESS GATES
apache   1/1     Running   0          111s   10.233.125.2     worker2   <none>           <none>
nginx    1/1     Running   0          103s   10.233.105.131   worker1   <none>           <none>" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
<h2>Wrap Up</h2>
<p>Creating the cluster was challenging, but I learned a lot about how Kubernetes works and how its components interact. Now, let's practice <strong>k8s</strong>.</p>2:[["$","$Le",null,{"children":[["$","$Lb",null,{"order":2,"fw":900,"size":"h1","children":"Kubernetes Cluster Setup using Kubespray"}],["$","$Lc",null,{"size":"sm","c":"dimmed","children":"Thu, Oct 9,  2025"}]]}],["$","$Lf",null,{"className":"markdown","children":["$","div",null,{"className":"markdown","dangerouslySetInnerHTML":{"__html":"$10"}}]}],["$","$L11",null,{}]]
